/*! For license information please see index.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.StacksTransactions=e():t.StacksTransactions=e()}(this,(()=>(()=>{var t,e,n={525:(t,e)=>{"use strict";function n(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function r(t){if("boolean"!=typeof t)throw new Error(`Expected boolean, not ${t}`)}function i(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function o(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(t.outputLen),n(t.blockLen)}function s(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function a(t,e){i(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(e,"__esModule",{value:!0}),e.output=e.exists=e.hash=e.bytes=e.bool=e.number=void 0,e.number=n,e.bool=r,e.bytes=i,e.hash=o,e.exists=s,e.output=a;const c={number:n,bool:r,bytes:i,hash:o,exists:s,output:a};e.default=c},350:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SHA2=void 0;const r=n(525),i=n(64);class o extends i.Hash{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,i.createView)(this.buffer)}update(t){r.default.exists(this);const{view:e,buffer:n,blockLen:o}=this,s=(t=(0,i.toBytes)(t)).length;for(let r=0;r<s;){const a=Math.min(o-this.pos,s-r);if(a!==o)n.set(t.subarray(r,r+a),this.pos),this.pos+=a,r+=a,this.pos===o&&(this.process(e,0),this.pos=0);else{const e=(0,i.createView)(t);for(;o<=s-r;r+=o)this.process(e,r)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){r.default.exists(this),r.default.output(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:o,isLE:s}=this;let{pos:a}=this;e[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>o-a&&(this.process(n,0),a=0);for(let t=a;t<o;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),a=Number(n&o),c=r?4:0,u=r?0:4;t.setUint32(e+c,s,r),t.setUint32(e+u,a,r)}(n,o-8,BigInt(8*this.length),s),this.process(n,0);const c=(0,i.createView)(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=u/4,f=this.get();if(h>f.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<h;t++)c.setUint32(4*t,f[t],s)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:o,pos:s}=this;return t.length=r,t.pos=s,t.finished=i,t.destroyed=o,r%e&&t.buffer.set(n),t}}e.SHA2=o},661:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.crypto=void 0,e.crypto={node:void 0,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0}},53:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sha224=e.sha256=void 0;const r=n(350),i=n(64),o=(t,e,n)=>t&e^t&n^e&n,s=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),a=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),c=new Uint32Array(64);class u extends r.SHA2{constructor(){super(64,32,8,!1),this.A=0|a[0],this.B=0|a[1],this.C=0|a[2],this.D=0|a[3],this.E=0|a[4],this.F=0|a[5],this.G=0|a[6],this.H=0|a[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:o,G:s,H:a}=this;return[t,e,n,r,i,o,s,a]}set(t,e,n,r,i,o,s,a){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(t,e){for(let n=0;n<16;n++,e+=4)c[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=c[t-15],n=c[t-2],r=(0,i.rotr)(e,7)^(0,i.rotr)(e,18)^e>>>3,o=(0,i.rotr)(n,17)^(0,i.rotr)(n,19)^n>>>10;c[t]=o+c[t-7]+r+c[t-16]|0}let{A:n,B:r,C:a,D:u,E:h,F:f,G:d,H:l}=this;for(let t=0;t<64;t++){const e=l+((0,i.rotr)(h,6)^(0,i.rotr)(h,11)^(0,i.rotr)(h,25))+((p=h)&f^~p&d)+s[t]+c[t]|0,y=((0,i.rotr)(n,2)^(0,i.rotr)(n,13)^(0,i.rotr)(n,22))+o(n,r,a)|0;l=d,d=f,f=h,h=u+e|0,u=a,a=r,r=n,n=e+y|0}var p;n=n+this.A|0,r=r+this.B|0,a=a+this.C|0,u=u+this.D|0,h=h+this.E|0,f=f+this.F|0,d=d+this.G|0,l=l+this.H|0,this.set(n,r,a,u,h,f,d,l)}roundClean(){c.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class h extends u{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}e.sha256=(0,i.wrapConstructor)((()=>new u)),e.sha224=(0,i.wrapConstructor)((()=>new h))},64:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const r=n(661);if(e.u8=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength),e.u32=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),e.createView=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),e.rotr=(t,e)=>t<<32-e|t>>>e,e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!e.isLE)throw new Error("Non little-endian hardware is not supported");const i=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function o(t){if("string"!=typeof t)throw new TypeError("utf8ToBytes expected string, got "+typeof t);return(new TextEncoder).encode(t)}function s(t){if("string"==typeof t&&(t=o(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}e.bytesToHex=function(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=i[t[n]];return e},e.hexToBytes=function(t){if("string"!=typeof t)throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){const r=2*n,i=t.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[n]=o}return e},e.nextTick=async()=>{},e.asyncLoop=async function(t,n,r){let i=Date.now();for(let o=0;o<t;o++){r(o);const t=Date.now()-i;t>=0&&t<n||(await(0,e.nextTick)(),i+=t)}},e.utf8ToBytes=o,e.toBytes=s,e.concatBytes=function(...t){if(!t.every((t=>t instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===t.length)return t[0];const e=t.reduce(((t,e)=>t+e.length),0),n=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const i=t[e];n.set(i,r),r+=i.length}return n},e.Hash=class{clone(){return this._cloneInto()}};e.checkOpts=function(t,e){if(void 0!==e&&("object"!=typeof e||(n=e,"[object Object]"!==Object.prototype.toString.call(n)||n.constructor!==Object)))throw new TypeError("Options should be object or undefined");var n;return Object.assign(t,e)},e.wrapConstructor=function(t){const e=e=>t().update(s(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e},e.wrapConstructorWithOpts=function(t){const e=(e,n)=>t(n).update(s(e)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=e=>t(e),e},e.randomBytes=function(t=32){if(r.crypto.web)return r.crypto.web.getRandomValues(new Uint8Array(t));if(r.crypto.node)return new Uint8Array(r.crypto.node.randomBytes(t).buffer);throw new Error("The environment doesn't have randomBytes function")}},98:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.c32ToB58=e.b58ToC32=e.c32addressDecode=e.c32address=e.versions=void 0;const r=n(392),i=n(716),o=n(64);e.versions={mainnet:{p2pkh:22,p2sh:20},testnet:{p2pkh:26,p2sh:21}};const s={};s[0]=e.versions.mainnet.p2pkh,s[5]=e.versions.mainnet.p2sh,s[111]=e.versions.testnet.p2pkh,s[196]=e.versions.testnet.p2sh;const a={};function c(t,e){if(!e.match(/^[0-9a-fA-F]{40}$/))throw new Error("Invalid argument: not a hash160 hex string");return`S${(0,r.c32checkEncode)(t,e)}`}function u(t){if(t.length<=5)throw new Error("Invalid c32 address: invalid length");if("S"!=t[0])throw new Error('Invalid c32 address: must start with "S"');return(0,r.c32checkDecode)(t.slice(1))}a[e.versions.mainnet.p2pkh]=0,a[e.versions.mainnet.p2sh]=5,a[e.versions.testnet.p2pkh]=111,a[e.versions.testnet.p2sh]=196,e.c32address=c,e.c32addressDecode=u,e.b58ToC32=function(t,e=-1){const n=i.decode(t),r=(0,o.bytesToHex)(n.data),a=parseInt((0,o.bytesToHex)(n.prefix),16);let u;return e<0?(u=a,void 0!==s[a]&&(u=s[a])):u=e,c(u,r)},e.c32ToB58=function(t,e=-1){const n=u(t),r=n[0],o=n[1];let s;e<0?(s=r,void 0!==a[r]&&(s=a[r])):s=e;let c=s.toString(16);return 1===c.length&&(c=`0${c}`),i.encode(o,c)}},716:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decode=e.encode=void 0;const r=n(53),i=n(64),o=n(805),s="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";e.encode=function(t,e="00"){const n="string"==typeof t?(0,i.hexToBytes)(t):t,a="string"==typeof e?(0,i.hexToBytes)(e):t;if(!(n instanceof Uint8Array&&a instanceof Uint8Array))throw new TypeError("Argument must be of type Uint8Array or string");const c=(0,r.sha256)((0,r.sha256)(new Uint8Array([...a,...n])));return o(s).encode([...a,...n,...c.slice(0,4)])},e.decode=function(t){const e=o(s).decode(t),n=e.slice(0,1),i=e.slice(1,-4),a=(0,r.sha256)((0,r.sha256)(new Uint8Array([...n,...i])));return e.slice(-4).forEach(((t,e)=>{if(t!==a[e])throw new Error("Invalid checksum")})),{prefix:n,data:i}}},392:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.c32checkDecode=e.c32checkEncode=void 0;const r=n(53),i=n(64),o=n(103);function s(t){const e=(0,r.sha256)((0,r.sha256)((0,i.hexToBytes)(t)));return(0,i.bytesToHex)(e.slice(0,4))}e.c32checkEncode=function(t,e){if(t<0||t>=32)throw new Error("Invalid version (must be between 0 and 31)");if(!e.match(/^[0-9a-fA-F]*$/))throw new Error("Invalid data (not a hex string)");(e=e.toLowerCase()).length%2!=0&&(e=`0${e}`);let n=t.toString(16);1===n.length&&(n=`0${n}`);const r=s(`${n}${e}`),i=(0,o.c32encode)(`${e}${r}`);return`${o.c32[t]}${i}`},e.c32checkDecode=function(t){t=(0,o.c32normalize)(t);const e=(0,o.c32decode)(t.slice(1)),n=t[0],r=o.c32.indexOf(n),i=e.slice(-8);let a=r.toString(16);if(1===a.length&&(a=`0${a}`),s(`${a}${e.substring(0,e.length-8)}`)!==i)throw new Error("Invalid c32check string: checksum mismatch");return[r,e.substring(0,e.length-8)]}},103:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.c32decode=e.c32normalize=e.c32encode=e.c32=void 0;const r=n(64);e.c32="0123456789ABCDEFGHJKMNPQRSTVWXYZ";const i="0123456789abcdef";function o(t){return t.toUpperCase().replace(/O/g,"0").replace(/L|I/g,"1")}e.c32encode=function(t,n){if(!t.match(/^[0-9a-fA-F]*$/))throw new Error("Not a hex-encoded string");t.length%2!=0&&(t=`0${t}`);let o=[],s=0;for(let n=(t=t.toLowerCase()).length-1;n>=0;n--)if(s<4){const r=i.indexOf(t[n])>>s;let a=0;0!==n&&(a=i.indexOf(t[n-1]));const c=1+s,u=a%(1<<c)<<5-c,h=e.c32[r+u];s=c,o.unshift(h)}else s=0;let a=0;for(let t=0;t<o.length&&"0"===o[t];t++)a++;o=o.slice(a);const c=(new TextDecoder).decode((0,r.hexToBytes)(t)).match(/^\u0000*/),u=c?c[0].length:0;for(let t=0;t<u;t++)o.unshift(e.c32[0]);if(n){const t=n-o.length;for(let n=0;n<t;n++)o.unshift(e.c32[0])}return o.join("")},e.c32normalize=o,e.c32decode=function(t,n){if(!(t=o(t)).match(`^[${e.c32}]*$`))throw new Error("Not a c32-encoded string");const r=t.match(`^${e.c32[0]}*`),s=r?r[0].length:0;let a=[],c=0,u=0;for(let n=t.length-1;n>=0;n--){4===u&&(a.unshift(i[c]),u=0,c=0);const r=(e.c32.indexOf(t[n])<<u)+c,o=i[r%16];if(u+=1,c=r>>4,c>1<<u)throw new Error("Panic error in decoding.");a.unshift(o)}a.unshift(i[c]),a.length%2==1&&a.unshift("0");let h=0;for(let t=0;t<a.length&&"0"===a[t];t++)h++;a=a.slice(h-h%2);let f=a.join("");for(let t=0;t<s;t++)f=`00${f}`;if(n){const t=2*n-f.length;for(let e=0;e<t;e+=2)f=`00${f}`}return f}},870:(t,e,n)=>{"use strict";e.yI=e.H4=void 0;n(103),n(392);const r=n(98);Object.defineProperty(e,"H4",{enumerable:!0,get:function(){return r.c32address}}),Object.defineProperty(e,"yI",{enumerable:!0,get:function(){return r.c32addressDecode}})},805:t=>{"use strict";t.exports=function(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var r=0;r<t.length;r++){var i=t.charAt(r),o=i.charCodeAt(0);if(255!==e[o])throw new TypeError(i+" is ambiguous");e[o]=r}var s=t.length,a=t.charAt(0),c=Math.log(s)/Math.log(256),u=Math.log(256)/Math.log(s);function h(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return new Uint8Array;for(var n=0,r=0,i=0;t[n]===a;)r++,n++;for(var o=(t.length-n)*c+1>>>0,u=new Uint8Array(o);t[n];){var h=e[t.charCodeAt(n)];if(255===h)return;for(var f=0,d=o-1;(0!==h||f<i)&&-1!==d;d--,f++)h+=s*u[d]>>>0,u[d]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");i=f,n++}for(var l=o-i;l!==o&&0===u[l];)l++;for(var p=new Uint8Array(r+(o-l)),y=r;l!==o;)p[y++]=u[l++];return p}return{encode:function(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";for(var n=0,r=0,i=0,o=e.length;i!==o&&0===e[i];)i++,n++;for(var c=(o-i)*u+1>>>0,h=new Uint8Array(c);i!==o;){for(var f=e[i],d=0,l=c-1;(0!==f||d<r)&&-1!==l;l--,d++)f+=256*h[l]>>>0,h[l]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");r=d,i++}for(var p=c-r;p!==c&&0===h[p];)p++;for(var y=a.repeat(n);p<c;++p)y+=t.charAt(h[p]);return y},decodeUnsafe:h,decode:function(t){var e=h(t);if(e)return e;throw new Error("Non-base"+s+" character")}}}},616:function(){!function(t){!function(e){var n={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(n.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=ArrayBuffer.isView||function(t){return t&&r.indexOf(Object.prototype.toString.call(t))>-1};function o(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function s(t){return"string"!=typeof t&&(t=String(t)),t}function a(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n.iterable&&(e[Symbol.iterator]=function(){return e}),e}function c(t){this.map={},t instanceof c?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function u(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function h(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function f(t){var e=new FileReader,n=h(e);return e.readAsArrayBuffer(t),n}function d(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:n.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:n.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:n.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():n.arrayBuffer&&n.blob&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=d(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):n.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||i(t))?this._bodyArrayBuffer=d(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n.blob&&(this.blob=function(){var t=u(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?u(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=function(){var t,e,n,r=u(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,n=h(e=new FileReader),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}c.prototype.append=function(t,e){t=o(t),e=s(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},c.prototype.delete=function(t){delete this.map[o(t)]},c.prototype.get=function(t){return t=o(t),this.has(t)?this.map[t]:null},c.prototype.has=function(t){return this.map.hasOwnProperty(o(t))},c.prototype.set=function(t,e){this.map[o(t)]=s(e)},c.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},c.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),a(t)},c.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),a(t)},c.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),a(t)},n.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var p=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function y(t,e){var n,r,i=(e=e||{}).body;if(t instanceof y){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new c(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new c(e.headers)),this.method=(r=(n=e.method||this.method||"GET").toUpperCase(),p.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function g(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}})),e}function w(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new c(e.headers),this.url=e.url||"",this._initBody(t)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},l.call(y.prototype),l.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},w.error=function(){var t=new w(null,{status:0,statusText:""});return t.type="error",t};var b=[301,302,303,307,308];w.redirect=function(t,e){if(-1===b.indexOf(e))throw new RangeError("Invalid status code");return new w(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function m(t,r){return new Promise((function(i,o){var s=new y(t,r);if(s.signal&&s.signal.aborted)return o(new e.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function u(){a.abort()}a.onload=function(){var t,e,n={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new c,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}})),e)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var r="response"in a?a.response:a.responseText;i(new w(r,n))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.onabort=function(){o(new e.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&n.blob&&(a.responseType="blob"),s.headers.forEach((function(t,e){a.setRequestHeader(e,t)})),s.signal&&(s.signal.addEventListener("abort",u),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",u)}),a.send(void 0===s._bodyInit?null:s._bodyInit)}))}m.polyfill=!0,t.fetch||(t.fetch=m,t.Headers=c,t.Request=y,t.Response=w),e.Headers=c,e.Request=y,e.Response=w,e.fetch=m,Object.defineProperty(e,"__esModule",{value:!0})}({})}("undefined"!=typeof self?self:this)},907:(t,e,n)=>{t=n.nmd(t);var r="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",s="[object Boolean]",a="[object Date]",c="[object Function]",u="[object GeneratorFunction]",h="[object Map]",f="[object Number]",d="[object Object]",l="[object Promise]",p="[object RegExp]",y="[object Set]",g="[object String]",w="[object Symbol]",b="[object WeakMap]",m="[object ArrayBuffer]",S="[object DataView]",v="[object Float32Array]",C="[object Float64Array]",A="[object Int8Array]",E="[object Int16Array]",x="[object Int32Array]",T="[object Uint8Array]",P="[object Uint8ClampedArray]",B="[object Uint16Array]",I="[object Uint32Array]",U=/\w*$/,O=/^\[object .+?Constructor\]$/,k=/^(?:0|[1-9]\d*)$/,$={};$[o]=$["[object Array]"]=$[m]=$[S]=$[s]=$[a]=$[v]=$[C]=$[A]=$[E]=$[x]=$[h]=$[f]=$[d]=$[p]=$[y]=$[g]=$[w]=$[T]=$[P]=$[B]=$[I]=!0,$["[object Error]"]=$[c]=$[b]=!1;var _="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,N="object"==typeof self&&self&&self.Object===Object&&self,H=_||N||Function("return this")(),F=e&&!e.nodeType&&e,M=F&&t&&!t.nodeType&&t,L=M&&M.exports===F;function j(t,e){return t.set(e[0],e[1]),t}function R(t,e){return t.add(e),t}function V(t,e,n,r){var i=-1,o=t?t.length:0;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function D(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function z(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function K(t,e){return function(n){return t(e(n))}}function G(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var W,q=Array.prototype,J=Function.prototype,X=Object.prototype,Z=H["__core-js_shared__"],Y=(W=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||""))?"Symbol(src)_1."+W:"",Q=J.toString,tt=X.hasOwnProperty,et=X.toString,nt=RegExp("^"+Q.call(tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rt=L?H.Buffer:void 0,it=H.Symbol,ot=H.Uint8Array,st=K(Object.getPrototypeOf,Object),at=Object.create,ct=X.propertyIsEnumerable,ut=q.splice,ht=Object.getOwnPropertySymbols,ft=rt?rt.isBuffer:void 0,dt=K(Object.keys,Object),lt=Ht(H,"DataView"),pt=Ht(H,"Map"),yt=Ht(H,"Promise"),gt=Ht(H,"Set"),wt=Ht(H,"WeakMap"),bt=Ht(Object,"create"),mt=Rt(lt),St=Rt(pt),vt=Rt(yt),Ct=Rt(gt),At=Rt(wt),Et=it?it.prototype:void 0,xt=Et?Et.valueOf:void 0;function Tt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Pt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Bt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function It(t){this.__data__=new Pt(t)}function Ut(t,e,n){var r=t[e];tt.call(t,e)&&Vt(r,n)&&(void 0!==n||e in t)||(t[e]=n)}function Ot(t,e){for(var n=t.length;n--;)if(Vt(t[n][0],e))return n;return-1}function kt(t,e,n,r,i,l,b){var O;if(r&&(O=l?r(t,i,l,b):r(t)),void 0!==O)return O;if(!Wt(t))return t;var k=Dt(t);if(k){if(O=function(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&tt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!e)return function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}(t,O)}else{var _=Mt(t),N=_==c||_==u;if(Kt(t))return function(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}(t,e);if(_==d||_==o||N&&!l){if(D(t))return l?t:{};if(O=function(t){return"function"!=typeof t.constructor||jt(t)?{}:Wt(e=st(t))?at(e):{};var e}(N?{}:t),!e)return function(t,e){return _t(t,Ft(t),e)}(t,function(t,e){return t&&_t(e,qt(e),t)}(O,t))}else{if(!$[_])return l?t:{};O=function(t,e,n,r){var i,o=t.constructor;switch(e){case m:return $t(t);case s:case a:return new o(+t);case S:return function(t,e){var n=e?$t(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,r);case v:case C:case A:case E:case x:case T:case P:case B:case I:return function(t,e){var n=e?$t(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,r);case h:return function(t,e,n){return V(e?n(z(t),!0):z(t),j,new t.constructor)}(t,r,n);case f:case g:return new o(t);case p:return function(t){var e=new t.constructor(t.source,U.exec(t));return e.lastIndex=t.lastIndex,e}(t);case y:return function(t,e,n){return V(e?n(G(t),!0):G(t),R,new t.constructor)}(t,r,n);case w:return i=t,xt?Object(xt.call(i)):{}}}(t,_,kt,e)}}b||(b=new It);var H=b.get(t);if(H)return H;if(b.set(t,O),!k)var F=n?function(t){return function(t,e,n){var r=e(t);return Dt(t)?r:function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}(r,n(t))}(t,qt,Ft)}(t):qt(t);return function(t,e){for(var n=-1,r=t?t.length:0;++n<r&&!1!==e(t[n],n););}(F||t,(function(i,o){F&&(i=t[o=i]),Ut(O,o,kt(i,e,n,r,o,t,b))})),O}function $t(t){var e=new t.constructor(t.byteLength);return new ot(e).set(new ot(t)),e}function _t(t,e,n,r){n||(n={});for(var i=-1,o=e.length;++i<o;){var s=e[i],a=r?r(n[s],t[s],s,n,t):void 0;Ut(n,s,void 0===a?t[s]:a)}return n}function Nt(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function Ht(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!Wt(t)||(e=t,Y&&Y in e))&&(Gt(t)||D(t)?nt:O).test(Rt(t));var e}(n)?n:void 0}Tt.prototype.clear=function(){this.__data__=bt?bt(null):{}},Tt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Tt.prototype.get=function(t){var e=this.__data__;if(bt){var n=e[t];return n===r?void 0:n}return tt.call(e,t)?e[t]:void 0},Tt.prototype.has=function(t){var e=this.__data__;return bt?void 0!==e[t]:tt.call(e,t)},Tt.prototype.set=function(t,e){return this.__data__[t]=bt&&void 0===e?r:e,this},Pt.prototype.clear=function(){this.__data__=[]},Pt.prototype.delete=function(t){var e=this.__data__,n=Ot(e,t);return!(n<0||(n==e.length-1?e.pop():ut.call(e,n,1),0))},Pt.prototype.get=function(t){var e=this.__data__,n=Ot(e,t);return n<0?void 0:e[n][1]},Pt.prototype.has=function(t){return Ot(this.__data__,t)>-1},Pt.prototype.set=function(t,e){var n=this.__data__,r=Ot(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},Bt.prototype.clear=function(){this.__data__={hash:new Tt,map:new(pt||Pt),string:new Tt}},Bt.prototype.delete=function(t){return Nt(this,t).delete(t)},Bt.prototype.get=function(t){return Nt(this,t).get(t)},Bt.prototype.has=function(t){return Nt(this,t).has(t)},Bt.prototype.set=function(t,e){return Nt(this,t).set(t,e),this},It.prototype.clear=function(){this.__data__=new Pt},It.prototype.delete=function(t){return this.__data__.delete(t)},It.prototype.get=function(t){return this.__data__.get(t)},It.prototype.has=function(t){return this.__data__.has(t)},It.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Pt){var r=n.__data__;if(!pt||r.length<199)return r.push([t,e]),this;n=this.__data__=new Bt(r)}return n.set(t,e),this};var Ft=ht?K(ht,Object):function(){return[]},Mt=function(t){return et.call(t)};function Lt(t,e){return!!(e=null==e?i:e)&&("number"==typeof t||k.test(t))&&t>-1&&t%1==0&&t<e}function jt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||X)}function Rt(t){if(null!=t){try{return Q.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Vt(t,e){return t===e||t!=t&&e!=e}(lt&&Mt(new lt(new ArrayBuffer(1)))!=S||pt&&Mt(new pt)!=h||yt&&Mt(yt.resolve())!=l||gt&&Mt(new gt)!=y||wt&&Mt(new wt)!=b)&&(Mt=function(t){var e=et.call(t),n=e==d?t.constructor:void 0,r=n?Rt(n):void 0;if(r)switch(r){case mt:return S;case St:return h;case vt:return l;case Ct:return y;case At:return b}return e});var Dt=Array.isArray;function zt(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}(t.length)&&!Gt(t)}var Kt=ft||function(){return!1};function Gt(t){var e=Wt(t)?et.call(t):"";return e==c||e==u}function Wt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function qt(t){return zt(t)?function(t,e){var n=Dt(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&zt(t)}(t)&&tt.call(t,"callee")&&(!ct.call(t,"callee")||et.call(t)==o)}(t)?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],r=n.length,i=!!r;for(var s in t)!e&&!tt.call(t,s)||i&&("length"==s||Lt(s,r))||n.push(s);return n}(t):function(t){if(!jt(t))return dt(t);var e=[];for(var n in Object(t))tt.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}t.exports=function(t){return kt(t,!0,!0)}},314:()=>{}},r={};function i(t){var e=r[t];if(void 0!==e)return e.exports;var o=r[t]={id:t,loaded:!1,exports:{}};return n[t].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,i.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var o=Object.create(null);i.r(o);var s={};t=t||[null,e({}),e([]),e(e)];for(var a=2&r&&n;"object"==typeof a&&!~t.indexOf(a);a=e(a))Object.getOwnPropertyNames(a).forEach((t=>s[t]=()=>n[t]));return s.default=()=>n,i.d(o,s),o},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var o={};return(()=>{"use strict";i.r(o),i.d(o,{AddressHashMode:()=>rt,AddressVersion:()=>it,AnchorMode:()=>q,AnchorModeNames:()=>J,AssetType:()=>ut,AuthFieldType:()=>di,AuthType:()=>nt,Authorization:()=>d.Authorization,BooleanCV:()=>n.BooleanCV,BufferCV:()=>e.BufferCV,BytesReader:()=>Dr,CLARITY_INT_BYTE_SIZE:()=>F,CLARITY_INT_SIZE:()=>H,COINBASE_BYTES_LENGTH:()=>M,COMPRESSED_PUBKEY_LENGTH_BYTES:()=>j,ChainID:()=>$,ClarityAbiTypeId:()=>ls,ClarityType:()=>yr,ClarityValue:()=>l.ClarityValue,ClarityVersion:()=>W,CoinbasePayload:()=>f.CoinbasePayload,CoinbasePayloadToAltRecipient:()=>f.CoinbasePayloadToAltRecipient,ContractCallPayload:()=>f.ContractCallPayload,ContractPrincipalCV:()=>r.ContractPrincipalCV,DEFAULT_CHAIN_ID:()=>_,DEFAULT_CORE_NODE_API_URL:()=>D,DEFAULT_TRANSACTION_VERSION:()=>Q,FalseCV:()=>n.FalseCV,FungibleConditionCode:()=>st,IntCV:()=>t.IntCV,ListCV:()=>c.ListCV,MAX_STRING_LENGTH_BYTES:()=>N,MEMO_MAX_LENGTH_BYTES:()=>V,NonFungibleConditionCode:()=>at,NoneCV:()=>a.NoneCV,OptionalCV:()=>a.OptionalCV,PayloadType:()=>G,PoisonPayload:()=>f.PoisonPayload,PostConditionMode:()=>tt,PostConditionPrincipalID:()=>ct,PostConditionType:()=>et,PrincipalCV:()=>r.PrincipalCV,PubKeyEncoding:()=>ot,RECOVERABLE_ECDSA_SIG_LENGTH_BYTES:()=>L,ResponseCV:()=>s.ResponseCV,ResponseErrorCV:()=>s.ResponseErrorCV,ResponseOkCV:()=>s.ResponseOkCV,STRUCTURED_DATA_PREFIX:()=>fa,SmartContractPayload:()=>f.SmartContractPayload,SomeCV:()=>a.SomeCV,SpendingCondition:()=>d.SpendingCondition,SponsoredAuthorization:()=>d.SponsoredAuthorization,StacksMessageType:()=>z,StacksTransaction:()=>Zo,StandardAuthorization:()=>d.StandardAuthorization,StandardPrincipalCV:()=>r.StandardPrincipalCV,StringAsciiCV:()=>h.StringAsciiCV,StringUtf8CV:()=>h.StringUtf8CV,TokenTransferPayload:()=>f.TokenTransferPayload,TransactionSigner:()=>Is,TransactionVersion:()=>Y,TrueCV:()=>n.TrueCV,TupleCV:()=>u.TupleCV,TxRejectedReason:()=>ht,UIntCV:()=>t.UIntCV,UNCOMPRESSED_PUBKEY_LENGTH_BYTES:()=>R,VersionedSmartContractPayload:()=>f.VersionedSmartContractPayload,abiFunctionToString:()=>xs,addressFromHashMode:()=>vi,addressFromPublicKeys:()=>Ci,addressFromVersionHash:()=>kn,addressHashModeToVersion:()=>On,addressToString:()=>$n,anchorModeFromNameOrValue:()=>Z,boolCV:()=>Tr,broadcastRawTransaction:()=>zs,broadcastTransaction:()=>Ds,bufferCV:()=>Cr,bufferCVFromString:()=>Ar,callReadOnlyFunction:()=>aa,cloneDeep:()=>qi,codeBodyString:()=>Ii,compressPublicKey:()=>Qn,contractPrincipalCV:()=>Or,contractPrincipalCVFromAddress:()=>kr,contractPrincipalCVFromStandard:()=>$r,createAddress:()=>fr,createAssetInfo:()=>hr,createContractPrincipal:()=>lr,createEmptyAddress:()=>Si,createFungiblePostCondition:()=>ts,createLPList:()=>Ni,createLPString:()=>ur,createMemoString:()=>Ui,createMessageSignature:()=>Un,createMultiSigSpendingCondition:()=>So,createNonFungiblePostCondition:()=>es,createSTXPostCondition:()=>Qo,createSingleSigSpendingCondition:()=>mo,createSponsoredAuth:()=>_o,createStacksPrivateKey:()=>er,createStacksPublicKey:()=>Kn,createStandardAuth:()=>$o,createStandardPrincipal:()=>pr,createTransactionAuthField:()=>pi,cvToHex:()=>ro,cvToJSON:()=>is,cvToString:()=>ns,cvToValue:()=>rs,decodeStructuredDataSignature:()=>ya,deserializeAddress:()=>Ei,deserializeAssetInfo:()=>_i,deserializeAuthorization:()=>Do,deserializeCV:()=>ti,deserializeLPList:()=>Fi,deserializeLPString:()=>Bi,deserializeMemoString:()=>ki,deserializeMessageSignature:()=>li,deserializeMultiSigSpendingCondition:()=>To,deserializePostCondition:()=>Li,deserializePrincipal:()=>Ti,deserializePublicKey:()=>tr,deserializeSingleSigSpendingCondition:()=>xo,deserializeSpendingCondition:()=>Bo,deserializeStacksMessage:()=>mi,deserializeTransaction:()=>Yo,deserializeTransactionAuthField:()=>yi,emptyMessageSignature:()=>bo,encodeClarityValue:()=>As,encodeStructuredData:()=>pa,estimateContractDeploy:()=>Js,estimateContractFunctionCall:()=>Ys,estimateTransaction:()=>Vs,estimateTransactionByteLength:()=>ua,estimateTransactionFeeWithFallback:()=>ha,estimateTransfer:()=>js,estimateTransferUnsafe:()=>Rs,exceedsMaxLengthBytes:()=>Wi,falseCV:()=>xr,getAbi:()=>Ks,getAddressFromPrivateKey:()=>Dn,getAddressFromPublicKey:()=>zn,getCVTypeString:()=>os,getFee:()=>Mo,getNonce:()=>Ls,getPublicKey:()=>or,getTypeString:()=>Es,getTypeUnion:()=>Cs,hash160:()=>Zi,hashP2PKH:()=>Yi,hashP2SH:()=>to,hashP2WPKH:()=>Qi,hashP2WSH:()=>eo,hashStructuredData:()=>da,hexToCV:()=>io,intCV:()=>Sr,intoInitialSighashAuth:()=>No,isClarityAbiBuffer:()=>ys,isClarityAbiList:()=>vs,isClarityAbiOptional:()=>ms,isClarityAbiPrimitive:()=>ps,isClarityAbiResponse:()=>bs,isClarityAbiStringAscii:()=>gs,isClarityAbiStringUtf8:()=>ws,isClarityAbiTuple:()=>Ss,isClarityName:()=>no,isCoinbasePayload:()=>oi,isCompressed:()=>Jn,isContractCallPayload:()=>ni,isPoisonPayload:()=>ii,isSingleSig:()=>vo,isSmartContractPayload:()=>ri,isTokenTransferPayload:()=>ei,leftPadHex:()=>zi,leftPadHexToLength:()=>Ki,listCV:()=>Lr,makeContractCall:()=>ta,makeContractDeploy:()=>Xs,makeContractFungiblePostCondition:()=>ia,makeContractNonFungiblePostCondition:()=>sa,makeContractSTXPostCondition:()=>na,makeRandomPrivKey:()=>nr,makeSTXTokenTransfer:()=>qs,makeSigHashPreSign:()=>Io,makeStandardFungiblePostCondition:()=>ra,makeStandardNonFungiblePostCondition:()=>oa,makeStandardSTXPostCondition:()=>ea,makeUnsignedContractCall:()=>Qs,makeUnsignedContractDeploy:()=>Zs,makeUnsignedSTXTokenTransfer:()=>Ws,nextSignature:()=>Oo,nextVerification:()=>ko,noneCV:()=>Hr,omit:()=>Ji,optionalCVOf:()=>Mr,parseAssetInfoString:()=>cr,parsePrincipalString:()=>dr,parseReadOnlyResponse:()=>oo,parseToCV:()=>Bs,principalCV:()=>Br,privateKeyToString:()=>sr,pubKeyfromPrivKey:()=>Yn,publicKeyFromBytes:()=>qn,publicKeyFromSignatureRsv:()=>Wn,publicKeyFromSignatureVrs:()=>Gn,publicKeyToAddress:()=>ar,publicKeyToString:()=>Xn,randomBytes:()=>Di,responseErrorCV:()=>_r,responseOkCV:()=>Nr,rightPadHexToLength:()=>Gi,serializeAddress:()=>Ai,serializeAssetInfo:()=>$i,serializeAuthorization:()=>Vo,serializeCV:()=>Vi,serializeLPList:()=>Hi,serializeLPString:()=>Pi,serializeMemoString:()=>Oi,serializeMessageSignature:()=>gi,serializeMultiSigSpendingCondition:()=>Eo,serializePayload:()=>hi,serializePostCondition:()=>Mi,serializePrincipal:()=>xi,serializePublicKey:()=>Zn,serializeSingleSigSpendingCondition:()=>Ao,serializeSpendingCondition:()=>Po,serializeStacksMessage:()=>bi,serializeTransactionAuthField:()=>wi,setFee:()=>Fo,setNonce:()=>Lo,setSponsor:()=>Ro,setSponsorNonce:()=>jo,signMessageHashRsv:()=>ir,signStructuredData:()=>ga,signWithKey:()=>rr,someCV:()=>Fr,sponsorTransaction:()=>ca,standardPrincipalCV:()=>Ir,standardPrincipalCVFromAddress:()=>Ur,stringAsciiCV:()=>Zr,stringCV:()=>Qr,stringUtf8CV:()=>Yr,trueCV:()=>Er,tupleCV:()=>jr,txidFromData:()=>Xi,uintCV:()=>vr,validateContractCall:()=>Ps,validateStacksAddress:()=>so,validateTxId:()=>ao,verifyOrigin:()=>Ho,verifySignature:()=>yn,whenMessageType:()=>K});var t={};i.r(t),i.d(t,{q:()=>Sr,R:()=>vr});var e={};i.r(e),i.d(e,{B:()=>Cr,f:()=>Ar});var n={};i.r(n),i.d(n,{H3:()=>Tr,ef:()=>xr,nC:()=>Er});var r={};i.r(r),i.d(r,{tM:()=>Or,I0:()=>kr,U2:()=>$r,L0:()=>Br,OY:()=>Pr,Op:()=>Ir,D9:()=>Ur});var s={};i.r(s),i.d(s,{I:()=>_r,R:()=>Nr});var a={};i.r(a),i.d(a,{hr:()=>Hr,mw:()=>Mr,PK:()=>Fr});var c={};i.r(c),i.d(c,{B:()=>Lr});var u={};i.r(u),i.d(u,{M:()=>jr});var h={};i.r(h),i.d(h,{jx:()=>Zr,u9:()=>Qr,M0:()=>Yr});var f={};i.r(f),i.d(f,{ql:()=>ai,UN:()=>ci,qu:()=>si,LV:()=>fi,V9:()=>oi,nj:()=>ni,VC:()=>ii,ox:()=>ri,_h:()=>ei,al:()=>hi});var d={};i.r(d),i.d(d,{C:()=>So,Tm:()=>mo,p1:()=>_o,Pd:()=>$o,XH:()=>Do,fe:()=>To,Dt:()=>xo,lW:()=>Bo,TR:()=>bo,JK:()=>Mo,m5:()=>No,GP:()=>vo,k4:()=>Io,a6:()=>Oo,Fd:()=>ko,h$:()=>Vo,H3:()=>Eo,QP:()=>Ao,Bq:()=>Po,P_:()=>Fo,nT:()=>Lo,fc:()=>Ro,K2:()=>jo,dd:()=>Ho});var l={};function p(t,e,n){return S(y(t,e),n)}function y(t,e){let n=t;if("number"==typeof n){if(!Number.isInteger(n))throw new RangeError("Invalid value. Values of type 'number' must be an integer.");return BigInt(n)}if("string"==typeof n)if(n.toLowerCase().startsWith("0x")){let t=n.slice(2);t=t.padStart(t.length+t.length%2,"0"),n=A(t)}else try{return BigInt(n)}catch(t){if(t instanceof SyntaxError)throw new RangeError(`Invalid value. String integer '${n}' is not finite.`)}if("bigint"==typeof n)return n;if(n instanceof Uint8Array){if(e){const t=function(t,e){return function(t,e){return t&BigInt(1)<<e}(t,e-BigInt(1))?t-(BigInt(1)<<e):t}(BigInt(`0x${C(n)}`),BigInt(8*n.byteLength));return BigInt(t.toString())}return BigInt(`0x${C(n)}`)}if(null!=n&&"object"==typeof n&&"BN"===n.constructor.name)return BigInt(n.toString());throw new TypeError("Invalid value type. Must be a number, bigint, integer-string, hex-string, or Uint8Array.")}function g(t){return t.startsWith("0x")?t:`0x${t}`}function w(t){if("string"!=typeof t)throw new TypeError("hexToBigInt: expected string, got "+typeof t);return BigInt(`0x${t}`)}function b(t,e=8){return("bigint"==typeof t?t:y(t,!1)).toString(16).padStart(2*e,"0")}function m(t){return parseInt(t,16)}function S(t,e=16){return A(b(t,e))}i.r(l),i.d(l,{YN:()=>is,Is:()=>ns,md:()=>rs,eH:()=>os});const v=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function C(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(const n of t)e+=v[n];return e}function A(t){if("string"!=typeof t)throw new TypeError("hexToBytes: expected string, got "+typeof t);const e=t.length%2?`0${t}`:t,n=new Uint8Array(e.length/2);for(let t=0;t<n.length;t++){const r=2*t,i=e.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[t]=o}return n}function E(t){return(new TextEncoder).encode(t)}function x(t){return(new TextDecoder).decode(t)}function T(t){const e=[];for(let n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return new Uint8Array(e)}function P(t){return String.fromCharCode.apply(null,t)}function B(t){return!Number.isInteger(t)||t<0||t>255}function I(t){if(t.some(B))throw new Error("Some values are invalid bytes.");return new Uint8Array(t)}function U(...t){if(!t.every((t=>t instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===t.length)return t[0];const e=t.reduce(((t,e)=>t+e.length),0),n=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const i=t[e];n.set(i,r),r+=i.length}return n}function O(t){return U(...t.map((t=>"number"==typeof t?I([t]):t instanceof Array?I(t):t)))}function k(t,e,n){t[n+3]=e,e>>>=8,t[n+2]=e,e>>>=8,t[n+1]=e,e>>>=8,t[n]=e}var $=(t=>(t[t.Testnet=2147483648]="Testnet",t[t.Mainnet=1]="Mainnet",t))($||{});const _=1,N=128,H=128,F=16,M=32,L=65,j=32,R=64,V=34,D="https://stacks-node-api.mainnet.stacks.co";var z=(t=>(t[t.Address=0]="Address",t[t.Principal=1]="Principal",t[t.LengthPrefixedString=2]="LengthPrefixedString",t[t.MemoString=3]="MemoString",t[t.AssetInfo=4]="AssetInfo",t[t.PostCondition=5]="PostCondition",t[t.PublicKey=6]="PublicKey",t[t.LengthPrefixedList=7]="LengthPrefixedList",t[t.Payload=8]="Payload",t[t.MessageSignature=9]="MessageSignature",t[t.StructuredDataSignature=10]="StructuredDataSignature",t[t.TransactionAuthField=11]="TransactionAuthField",t))(z||{});function K(t){return e=>e[t]}var G=(t=>(t[t.TokenTransfer=0]="TokenTransfer",t[t.SmartContract=1]="SmartContract",t[t.VersionedSmartContract=6]="VersionedSmartContract",t[t.ContractCall=2]="ContractCall",t[t.PoisonMicroblock=3]="PoisonMicroblock",t[t.Coinbase=4]="Coinbase",t[t.CoinbaseToAltRecipient=5]="CoinbaseToAltRecipient",t))(G||{}),W=(t=>(t[t.Clarity1=1]="Clarity1",t[t.Clarity2=2]="Clarity2",t))(W||{}),q=(t=>(t[t.OnChainOnly=1]="OnChainOnly",t[t.OffChainOnly=2]="OffChainOnly",t[t.Any=3]="Any",t))(q||{});const J=["onChainOnly","offChainOnly","any"],X={[J[0]]:1,[J[1]]:2,[J[2]]:3,1:1,2:2,3:3};function Z(t){if(t in X)return X[t];throw new Error(`Invalid anchor mode "${t}", must be one of: ${J.join(", ")}`)}var Y=(t=>(t[t.Mainnet=0]="Mainnet",t[t.Testnet=128]="Testnet",t))(Y||{});const Q=0;var tt=(t=>(t[t.Allow=1]="Allow",t[t.Deny=2]="Deny",t))(tt||{}),et=(t=>(t[t.STX=0]="STX",t[t.Fungible=1]="Fungible",t[t.NonFungible=2]="NonFungible",t))(et||{}),nt=(t=>(t[t.Standard=4]="Standard",t[t.Sponsored=5]="Sponsored",t))(nt||{}),rt=(t=>(t[t.SerializeP2PKH=0]="SerializeP2PKH",t[t.SerializeP2SH=1]="SerializeP2SH",t[t.SerializeP2WPKH=2]="SerializeP2WPKH",t[t.SerializeP2WSH=3]="SerializeP2WSH",t))(rt||{}),it=(t=>(t[t.MainnetSingleSig=22]="MainnetSingleSig",t[t.MainnetMultiSig=20]="MainnetMultiSig",t[t.TestnetSingleSig=26]="TestnetSingleSig",t[t.TestnetMultiSig=21]="TestnetMultiSig",t))(it||{}),ot=(t=>(t[t.Compressed=0]="Compressed",t[t.Uncompressed=1]="Uncompressed",t))(ot||{}),st=(t=>(t[t.Equal=1]="Equal",t[t.Greater=2]="Greater",t[t.GreaterEqual=3]="GreaterEqual",t[t.Less=4]="Less",t[t.LessEqual=5]="LessEqual",t))(st||{}),at=(t=>(t[t.Sends=16]="Sends",t[t.DoesNotSend=17]="DoesNotSend",t))(at||{}),ct=(t=>(t[t.Origin=1]="Origin",t[t.Standard=2]="Standard",t[t.Contract=3]="Contract",t))(ct||{}),ut=(t=>(t[t.STX=0]="STX",t[t.Fungible=1]="Fungible",t[t.NonFungible=2]="NonFungible",t))(ut||{}),ht=(t=>(t.Serialization="Serialization",t.Deserialization="Deserialization",t.SignatureValidation="SignatureValidation",t.FeeTooLow="FeeTooLow",t.BadNonce="BadNonce",t.NotEnoughFunds="NotEnoughFunds",t.NoSuchContract="NoSuchContract",t.NoSuchPublicFunction="NoSuchPublicFunction",t.BadFunctionArgument="BadFunctionArgument",t.ContractAlreadyExists="ContractAlreadyExists",t.PoisonMicroblocksDoNotConflict="PoisonMicroblocksDoNotConflict",t.PoisonMicroblockHasUnknownPubKeyHash="PoisonMicroblockHasUnknownPubKeyHash",t.PoisonMicroblockIsInvalid="PoisonMicroblockIsInvalid",t.BadAddressVersionByte="BadAddressVersionByte",t.NoCoinbaseViaMempool="NoCoinbaseViaMempool",t.ServerFailureNoSuchChainTip="ServerFailureNoSuchChainTip",t.ServerFailureDatabase="ServerFailureDatabase",t.ServerFailureOther="ServerFailureOther",t))(ht||{});function ft(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function dt(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}const lt={number:ft,bool:function(t){if("boolean"!=typeof t)throw new Error(`Expected boolean, not ${t}`)},bytes:dt,hash:function(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");ft(t.outputLen),ft(t.blockLen)},exists:function(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")},output:function(t,e){dt(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}},pt=("object"==typeof self&&"crypto"in self&&self.crypto,t=>new DataView(t.buffer,t.byteOffset,t.byteLength)),yt=(t,e)=>t<<32-e|t>>>e;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function gt(t){if("string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new TypeError("utf8ToBytes expected string, got "+typeof t);return(new TextEncoder).encode(t)}(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));class wt{clone(){return this._cloneInto()}}function bt(t){const e=e=>t().update(gt(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}class mt extends wt{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=pt(this.buffer)}update(t){lt.exists(this);const{view:e,buffer:n,blockLen:r}=this,i=(t=gt(t)).length;for(let o=0;o<i;){const s=Math.min(r-this.pos,i-o);if(s!==r)n.set(t.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===r&&(this.process(e,0),this.pos=0);else{const e=pt(t);for(;r<=i-o;o+=r)this.process(e,o)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){lt.exists(this),lt.output(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(n,0),o=0);for(let t=o;t<r;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),a=Number(n&o),c=r?4:0,u=r?0:4;t.setUint32(e+c,s,r),t.setUint32(e+u,a,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const s=pt(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<c;t++)s.setUint32(4*t,u[t],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:o,pos:s}=this;return t.length=r,t.pos=s,t.finished=i,t.destroyed=o,r%e&&t.buffer.set(n),t}}const St=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),vt=Uint8Array.from({length:16},((t,e)=>e)),Ct=vt.map((t=>(9*t+5)%16));let At=[vt],Et=[Ct];for(let t=0;t<4;t++)for(let e of[At,Et])e.push(e[t].map((t=>St[t])));const xt=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((t=>new Uint8Array(t))),Tt=At.map(((t,e)=>t.map((t=>xt[e][t])))),Pt=Et.map(((t,e)=>t.map((t=>xt[e][t])))),Bt=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),It=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Ut=(t,e)=>t<<e|t>>>32-e;function Ot(t,e,n,r){return 0===t?e^n^r:1===t?e&n|~e&r:2===t?(e|~n)^r:3===t?e&r|n&~r:e^(n|~r)}const kt=new Uint32Array(16);class $t extends mt{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:t,h1:e,h2:n,h3:r,h4:i}=this;return[t,e,n,r,i]}set(t,e,n,r,i){this.h0=0|t,this.h1=0|e,this.h2=0|n,this.h3=0|r,this.h4=0|i}process(t,e){for(let n=0;n<16;n++,e+=4)kt[n]=t.getUint32(e,!0);let n=0|this.h0,r=n,i=0|this.h1,o=i,s=0|this.h2,a=s,c=0|this.h3,u=c,h=0|this.h4,f=h;for(let t=0;t<5;t++){const e=4-t,d=Bt[t],l=It[t],p=At[t],y=Et[t],g=Tt[t],w=Pt[t];for(let e=0;e<16;e++){const r=Ut(n+Ot(t,i,s,c)+kt[p[e]]+d,g[e])+h|0;n=h,h=c,c=0|Ut(s,10),s=i,i=r}for(let t=0;t<16;t++){const n=Ut(r+Ot(e,o,a,u)+kt[y[t]]+l,w[t])+f|0;r=f,f=u,u=0|Ut(a,10),a=o,o=n}}this.set(this.h1+s+u|0,this.h2+c+f|0,this.h3+h+r|0,this.h4+n+o|0,this.h0+i+a|0)}roundClean(){kt.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const _t=bt((()=>new $t)),Nt=(t,e,n)=>t&e^t&n^e&n,Ht=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ft=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Mt=new Uint32Array(64);class Lt extends mt{constructor(){super(64,32,8,!1),this.A=0|Ft[0],this.B=0|Ft[1],this.C=0|Ft[2],this.D=0|Ft[3],this.E=0|Ft[4],this.F=0|Ft[5],this.G=0|Ft[6],this.H=0|Ft[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:o,G:s,H:a}=this;return[t,e,n,r,i,o,s,a]}set(t,e,n,r,i,o,s,a){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(t,e){for(let n=0;n<16;n++,e+=4)Mt[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=Mt[t-15],n=Mt[t-2],r=yt(e,7)^yt(e,18)^e>>>3,i=yt(n,17)^yt(n,19)^n>>>10;Mt[t]=i+Mt[t-7]+r+Mt[t-16]|0}let{A:n,B:r,C:i,D:o,E:s,F:a,G:c,H:u}=this;for(let t=0;t<64;t++){const e=u+(yt(s,6)^yt(s,11)^yt(s,25))+((h=s)&a^~h&c)+Ht[t]+Mt[t]|0,f=(yt(n,2)^yt(n,13)^yt(n,22))+Nt(n,r,i)|0;u=c,c=a,a=s,s=o+e|0,o=i,i=r,r=n,n=e+f|0}var h;n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,r,i,o,s,a,c,u)}roundClean(){Mt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class jt extends Lt{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const Rt=bt((()=>new Lt)),Vt=(bt((()=>new jt)),BigInt(2**32-1)),Dt=BigInt(32);function zt(t,e=!1){return e?{h:Number(t&Vt),l:Number(t>>Dt&Vt)}:{h:0|Number(t>>Dt&Vt),l:0|Number(t&Vt)}}const Kt=function(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:o,l:s}=zt(t[i],e);[n[i],r[i]]=[o,s]}return[n,r]},Gt=(t,e,n)=>t>>>n,Wt=(t,e,n)=>t<<32-n|e>>>n,qt=(t,e,n)=>t>>>n|e<<32-n,Jt=(t,e,n)=>t<<32-n|e>>>n,Xt=(t,e,n)=>t<<64-n|e>>>n-32,Zt=(t,e,n)=>t>>>n-32|e<<64-n,Yt=function(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:0|i}},Qt=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),te=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,ee=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),ne=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,re=(t,e,n,r,i,o)=>e+n+r+i+o+(t/2**32|0)|0,ie=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),[oe,se]=Kt(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((t=>BigInt(t)))),ae=new Uint32Array(80),ce=new Uint32Array(80);class ue extends mt{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:n,Bl:r,Ch:i,Cl:o,Dh:s,Dl:a,Eh:c,El:u,Fh:h,Fl:f,Gh:d,Gl:l,Hh:p,Hl:y}=this;return[t,e,n,r,i,o,s,a,c,u,h,f,d,l,p,y]}set(t,e,n,r,i,o,s,a,c,u,h,f,d,l,p,y){this.Ah=0|t,this.Al=0|e,this.Bh=0|n,this.Bl=0|r,this.Ch=0|i,this.Cl=0|o,this.Dh=0|s,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|h,this.Fl=0|f,this.Gh=0|d,this.Gl=0|l,this.Hh=0|p,this.Hl=0|y}process(t,e){for(let n=0;n<16;n++,e+=4)ae[n]=t.getUint32(e),ce[n]=t.getUint32(e+=4);for(let t=16;t<80;t++){const e=0|ae[t-15],n=0|ce[t-15],r=qt(e,n,1)^qt(e,n,8)^Gt(e,n,7),i=Jt(e,n,1)^Jt(e,n,8)^Wt(e,n,7),o=0|ae[t-2],s=0|ce[t-2],a=qt(o,s,19)^Xt(o,s,61)^Gt(o,s,6),c=Jt(o,s,19)^Zt(o,s,61)^Wt(o,s,6),u=ee(i,c,ce[t-7],ce[t-16]),h=ne(u,r,a,ae[t-7],ae[t-16]);ae[t]=0|h,ce[t]=0|u}let{Ah:n,Al:r,Bh:i,Bl:o,Ch:s,Cl:a,Dh:c,Dl:u,Eh:h,El:f,Fh:d,Fl:l,Gh:p,Gl:y,Hh:g,Hl:w}=this;for(let t=0;t<80;t++){const e=qt(h,f,14)^qt(h,f,18)^Xt(h,f,41),b=Jt(h,f,14)^Jt(h,f,18)^Zt(h,f,41),m=h&d^~h&p,S=ie(w,b,f&l^~f&y,se[t],ce[t]),v=re(S,g,e,m,oe[t],ae[t]),C=0|S,A=qt(n,r,28)^Xt(n,r,34)^Xt(n,r,39),E=Jt(n,r,28)^Zt(n,r,34)^Zt(n,r,39),x=n&i^n&s^i&s,T=r&o^r&a^o&a;g=0|p,w=0|y,p=0|d,y=0|l,d=0|h,l=0|f,({h,l:f}=Yt(0|c,0|u,0|v,0|C)),c=0|s,u=0|a,s=0|i,a=0|o,i=0|n,o=0|r;const P=Qt(C,E,T);n=te(P,v,A,x),r=0|P}({h:n,l:r}=Yt(0|this.Ah,0|this.Al,0|n,0|r)),({h:i,l:o}=Yt(0|this.Bh,0|this.Bl,0|i,0|o)),({h:s,l:a}=Yt(0|this.Ch,0|this.Cl,0|s,0|a)),({h:c,l:u}=Yt(0|this.Dh,0|this.Dl,0|c,0|u)),({h,l:f}=Yt(0|this.Eh,0|this.El,0|h,0|f)),({h:d,l}=Yt(0|this.Fh,0|this.Fl,0|d,0|l)),({h:p,l:y}=Yt(0|this.Gh,0|this.Gl,0|p,0|y)),({h:g,l:w}=Yt(0|this.Hh,0|this.Hl,0|g,0|w)),this.set(n,r,i,o,s,a,c,u,h,f,d,l,p,y,g,w)}roundClean(){ae.fill(0),ce.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class he extends ue{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class fe extends ue{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class de extends ue{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}bt((()=>new ue)),bt((()=>new he));const le=bt((()=>new fe));bt((()=>new de));var pe=i(314),ye=i.t(pe,2);const ge=BigInt(0),we=BigInt(1),be=BigInt(2),me=BigInt(3),Se=BigInt(8),ve=Object.freeze({a:ge,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:we,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),Ce=(t,e)=>(t+e/be)/e,Ae={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(t){const{n:e}=ve,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-we*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,s=BigInt("0x100000000000000000000000000000000"),a=Ce(o*t,e),c=Ce(-r*t,e);let u=Ye(t-a*n-c*i,e),h=Ye(-a*r-c*o,e);const f=u>s,d=h>s;if(f&&(u=e-u),d&&(h=e-h),u>s||h>s)throw new Error("splitScalarEndo: Endomorphism failed, k="+t);return{k1neg:f,k1:u,k2neg:d,k2:h}}},Ee=32,xe=32,Te=32,Pe=Ee+1,Be=2*Ee+1;function Ie(t){const{a:e,b:n}=ve,r=Ye(t*t),i=Ye(r*t);return Ye(i+e*t+n)}const Ue=ve.a===ge;class Oe extends Error{constructor(t){super(t)}}function ke(t){if(!(t instanceof $e))throw new TypeError("JacobianPoint expected")}class $e{constructor(t,e,n){this.x=t,this.y=e,this.z=n}static fromAffine(t){if(!(t instanceof He))throw new TypeError("JacobianPoint#fromAffine: expected Point");return t.equals(He.ZERO)?$e.ZERO:new $e(t.x,t.y,we)}static toAffineBatch(t){const e=function(t,e=ve.P){const n=new Array(t.length),r=tn(t.reduce(((t,r,i)=>r===ge?t:(n[i]=t,Ye(t*r,e))),we),e);return t.reduceRight(((t,r,i)=>r===ge?t:(n[i]=Ye(t*n[i],e),Ye(t*r,e))),r),n}(t.map((t=>t.z)));return t.map(((t,n)=>t.toAffine(e[n])))}static normalizeZ(t){return $e.toAffineBatch(t).map($e.fromAffine)}equals(t){ke(t);const{x:e,y:n,z:r}=this,{x:i,y:o,z:s}=t,a=Ye(r*r),c=Ye(s*s),u=Ye(e*c),h=Ye(i*a),f=Ye(Ye(n*s)*c),d=Ye(Ye(o*r)*a);return u===h&&f===d}negate(){return new $e(this.x,Ye(-this.y),this.z)}double(){const{x:t,y:e,z:n}=this,r=Ye(t*t),i=Ye(e*e),o=Ye(i*i),s=t+i,a=Ye(be*(Ye(s*s)-r-o)),c=Ye(me*r),u=Ye(c*c),h=Ye(u-be*a),f=Ye(c*(a-h)-Se*o),d=Ye(be*e*n);return new $e(h,f,d)}add(t){ke(t);const{x:e,y:n,z:r}=this,{x:i,y:o,z:s}=t;if(i===ge||o===ge)return this;if(e===ge||n===ge)return t;const a=Ye(r*r),c=Ye(s*s),u=Ye(e*c),h=Ye(i*a),f=Ye(Ye(n*s)*c),d=Ye(Ye(o*r)*a),l=Ye(h-u),p=Ye(d-f);if(l===ge)return p===ge?this.double():$e.ZERO;const y=Ye(l*l),g=Ye(l*y),w=Ye(u*y),b=Ye(p*p-g-be*w),m=Ye(p*(w-b)-f*g),S=Ye(r*s*l);return new $e(b,m,S)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){const e=$e.ZERO;if("bigint"==typeof t&&t===ge)return e;let n=Ze(t);if(n===we)return this;if(!Ue){let t=e,r=this;for(;n>ge;)n&we&&(t=t.add(r)),r=r.double(),n>>=we;return t}let{k1neg:r,k1:i,k2neg:o,k2:s}=Ae.splitScalar(n),a=e,c=e,u=this;for(;i>ge||s>ge;)i&we&&(a=a.add(u)),s&we&&(c=c.add(u)),u=u.double(),i>>=we,s>>=we;return r&&(a=a.negate()),o&&(c=c.negate()),c=new $e(Ye(c.x*Ae.beta),c.y,c.z),a.add(c)}precomputeWindow(t){const e=Ue?128/t+1:256/t+1,n=[];let r=this,i=r;for(let o=0;o<e;o++){i=r,n.push(i);for(let e=1;e<2**(t-1);e++)i=i.add(r),n.push(i);r=i.double()}return n}wNAF(t,e){!e&&this.equals($e.BASE)&&(e=He.BASE);const n=e&&e._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let r=e&&Ne.get(e);r||(r=this.precomputeWindow(n),e&&1!==n&&(r=$e.normalizeZ(r),Ne.set(e,r)));let i=$e.ZERO,o=$e.BASE;const s=1+(Ue?128/n:256/n),a=2**(n-1),c=BigInt(2**n-1),u=2**n,h=BigInt(n);for(let e=0;e<s;e++){const n=e*a;let s=Number(t&c);t>>=h,s>a&&(s-=u,t+=we);const f=n,d=n+Math.abs(s)-1,l=e%2!=0,p=s<0;0===s?o=o.add(_e(l,r[f])):i=i.add(_e(p,r[d]))}return{p:i,f:o}}multiply(t,e){let n,r,i=Ze(t);if(Ue){const{k1neg:t,k1:o,k2neg:s,k2:a}=Ae.splitScalar(i);let{p:c,f:u}=this.wNAF(o,e),{p:h,f}=this.wNAF(a,e);c=_e(t,c),h=_e(s,h),h=new $e(Ye(h.x*Ae.beta),h.y,h.z),n=c.add(h),r=u.add(f)}else{const{p:t,f:o}=this.wNAF(i,e);n=t,r=o}return $e.normalizeZ([n,r])[0]}toAffine(t){const{x:e,y:n,z:r}=this,i=this.equals($e.ZERO);null==t&&(t=i?Se:tn(r));const o=t,s=Ye(o*o),a=Ye(s*o),c=Ye(e*s),u=Ye(n*a),h=Ye(r*o);if(i)return He.ZERO;if(h!==we)throw new Error("invZ was invalid");return new He(c,u)}}function _e(t,e){const n=e.negate();return t?n:e}$e.BASE=new $e(ve.Gx,ve.Gy,we),$e.ZERO=new $e(ge,we,ge);const Ne=new WeakMap;class He{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,Ne.delete(this)}hasEvenY(){return this.y%be===ge}static fromCompressedHex(t){const e=32===t.length,n=Je(e?t:t.subarray(1));if(!an(n))throw new Error("Point is not on curve");let r=function(t){const{P:e}=ve,n=BigInt(6),r=BigInt(11),i=BigInt(22),o=BigInt(23),s=BigInt(44),a=BigInt(88),c=t*t*t%e,u=c*c*t%e,h=Qe(u,me)*u%e,f=Qe(h,me)*u%e,d=Qe(f,be)*c%e,l=Qe(d,r)*d%e,p=Qe(l,i)*l%e,y=Qe(p,s)*p%e,g=Qe(y,a)*y%e,w=Qe(g,s)*p%e,b=Qe(w,me)*u%e,m=Qe(b,o)*l%e,S=Qe(m,n)*c%e,v=Qe(S,be);if(v*v%e!==t)throw new Error("Cannot find square root");return v}(Ie(n));const i=(r&we)===we;e?i&&(r=Ye(-r)):1==(1&t[0])!==i&&(r=Ye(-r));const o=new He(n,r);return o.assertValidity(),o}static fromUncompressedHex(t){const e=Je(t.subarray(1,Ee+1)),n=Je(t.subarray(Ee+1,2*Ee+1)),r=new He(e,n);return r.assertValidity(),r}static fromHex(t){const e=Xe(t),n=e.length,r=e[0];if(n===Ee)return this.fromCompressedHex(e);if(n===Pe&&(2===r||3===r))return this.fromCompressedHex(e);if(n===Be&&4===r)return this.fromUncompressedHex(e);throw new Error(`Point.fromHex: received invalid point. Expected 32-${Pe} compressed bytes or ${Be} uncompressed bytes, not ${n}`)}static fromPrivateKey(t){return He.BASE.multiply(un(t))}static fromSignature(t,e,n){const{r,s:i}=hn(e);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");const o=en(Xe(t)),{n:s}=ve,a=2===n||3===n?r+s:r,c=tn(a,s),u=Ye(-o*c,s),h=Ye(i*c,s),f=1&n?"03":"02",d=He.fromHex(f+ze(a)),l=He.BASE.multiplyAndAddUnsafe(d,u,h);if(!l)throw new Error("Cannot recover signature: point at infinify");return l.assertValidity(),l}toRawBytes(t=!1){return qe(this.toHex(t))}toHex(t=!1){const e=ze(this.x);return t?`${this.hasEvenY()?"02":"03"}${e}`:`04${e}${ze(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const t="Point is not on elliptic curve",{x:e,y:n}=this;if(!an(e)||!an(n))throw new Error(t);const r=Ye(n*n);if(Ye(r-Ie(e))!==ge)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new He(this.x,Ye(-this.y))}double(){return $e.fromAffine(this).double().toAffine()}add(t){return $e.fromAffine(this).add($e.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return $e.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,e,n){const r=$e.fromAffine(this),i=e===ge||e===we||this!==He.BASE?r.multiplyUnsafe(e):r.multiply(e),o=$e.fromAffine(t).multiplyUnsafe(n),s=i.add(o);return s.equals($e.ZERO)?void 0:s.toAffine()}}function Fe(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}function Me(t){if(t.length<2||2!==t[0])throw new Error(`Invalid signature integer tag: ${Ve(t)}`);const e=t[1],n=t.subarray(2,e+2);if(!e||n.length!==e)throw new Error("Invalid signature integer: wrong length");if(0===n[0]&&n[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:Je(n),left:t.subarray(e+2)}}He.BASE=new He(ve.Gx,ve.Gy),He.ZERO=new He(ge,ge);class Le{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromCompact(t){const e=t instanceof Uint8Array,n="Signature.fromCompact";if("string"!=typeof t&&!e)throw new TypeError(`${n}: Expected string or Uint8Array`);const r=e?Ve(t):t;if(128!==r.length)throw new Error(`${n}: Expected 64-byte hex`);return new Le(We(r.slice(0,64)),We(r.slice(64,128)))}static fromDER(t){const e=t instanceof Uint8Array;if("string"!=typeof t&&!e)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:n,s:r}=function(t){if(t.length<2||48!=t[0])throw new Error(`Invalid signature tag: ${Ve(t)}`);if(t[1]!==t.length-2)throw new Error("Invalid signature: incorrect length");const{data:e,left:n}=Me(t.subarray(2)),{data:r,left:i}=Me(n);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${Ve(i)}`);return{r:e,s:r}}(e?t:qe(t));return new Le(n,r)}static fromHex(t){return this.fromDER(t)}assertValidity(){const{r:t,s:e}=this;if(!sn(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!sn(e))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const t=ve.n>>we;return this.s>t}normalizeS(){return this.hasHighS()?new Le(this.r,Ye(-this.s,ve.n)):this}toDERRawBytes(){return qe(this.toDERHex())}toDERHex(){const t=Fe(Ge(this.s)),e=Fe(Ge(this.r)),n=t.length/2,r=e.length/2,i=Ge(n),o=Ge(r);return`30${Ge(r+n+4)}02${o}${e}02${i}${t}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return qe(this.toCompactHex())}toCompactHex(){return ze(this.r)+ze(this.s)}}function je(...t){if(!t.every((t=>t instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===t.length)return t[0];const e=t.reduce(((t,e)=>t+e.length),0),n=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const i=t[e];n.set(i,r),r+=i.length}return n}const Re=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function Ve(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");let e="";for(let n=0;n<t.length;n++)e+=Re[t[n]];return e}const De=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function ze(t){if("bigint"!=typeof t)throw new Error("Expected bigint");if(!(ge<=t&&t<De))throw new Error("Expected number 0 <= n < 2^256");return t.toString(16).padStart(64,"0")}function Ke(t){const e=qe(ze(t));if(32!==e.length)throw new Error("Error: expected 32 bytes");return e}function Ge(t){const e=t.toString(16);return 1&e.length?`0${e}`:e}function We(t){if("string"!=typeof t)throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function qe(t){if("string"!=typeof t)throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+t.length);const e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){const r=2*n,i=t.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[n]=o}return e}function Je(t){return We(Ve(t))}function Xe(t){return t instanceof Uint8Array?Uint8Array.from(t):qe(t)}function Ze(t){if("number"==typeof t&&Number.isSafeInteger(t)&&t>0)return BigInt(t);if("bigint"==typeof t&&sn(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function Ye(t,e=ve.P){const n=t%e;return n>=ge?n:e+n}function Qe(t,e){const{P:n}=ve;let r=t;for(;e-- >ge;)r*=r,r%=n;return r}function tn(t,e=ve.P){if(t===ge||e<=ge)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Ye(t,e),r=e,i=ge,o=we,s=we,a=ge;for(;n!==ge;){const t=r/n,e=r%n,c=i-s*t,u=o-a*t;r=n,n=e,i=s,o=a,s=c,a=u}if(r!==we)throw new Error("invert: does not exist");return Ye(i,e)}function en(t,e=!1){const n=function(t){const e=8*t.length-8*xe,n=Je(t);return e>0?n>>BigInt(e):n}(t);if(e)return n;const{n:r}=ve;return n>=r?n-r:n}let nn,rn;class on{constructor(t,e){if(this.hashLen=t,this.qByteLen=e,"number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(t).fill(1),this.k=new Uint8Array(t).fill(0),this.counter=0}hmac(...t){return bn.hmacSha256(this.k,...t)}hmacSync(...t){return rn(this.k,...t)}checkSync(){if("function"!=typeof rn)throw new Oe("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(t=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),t),this.v=await this.hmac(this.v),0!==t.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),t),this.v=await this.hmac(this.v))}reseedSync(t=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),t),this.v=this.hmacSync(this.v),0!==t.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),t),this.v=this.hmacSync(this.v))}async generate(){this.incr();let t=0;const e=[];for(;t<this.qByteLen;){this.v=await this.hmac(this.v);const n=this.v.slice();e.push(n),t+=this.v.length}return je(...e)}generateSync(){this.checkSync(),this.incr();let t=0;const e=[];for(;t<this.qByteLen;){this.v=this.hmacSync(this.v);const n=this.v.slice();e.push(n),t+=this.v.length}return je(...e)}}function sn(t){return ge<t&&t<ve.n}function an(t){return ge<t&&t<ve.P}function cn(t,e,n,r=!0){const{n:i}=ve,o=en(t,!0);if(!sn(o))return;const s=tn(o,i),a=He.BASE.multiply(o),c=Ye(a.x,i);if(c===ge)return;const u=Ye(s*Ye(e+n*c,i),i);if(u===ge)return;let h=new Le(c,u),f=(a.x===h.r?0:2)|Number(a.y&we);return r&&h.hasHighS()&&(h=h.normalizeS(),f^=1),{sig:h,recovery:f}}function un(t){let e;if("bigint"==typeof t)e=t;else if("number"==typeof t&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if("string"==typeof t){if(t.length!==2*xe)throw new Error("Expected 32 bytes of private key");e=We(t)}else{if(!(t instanceof Uint8Array))throw new TypeError("Expected valid private key");if(t.length!==xe)throw new Error("Expected 32 bytes of private key");e=Je(t)}if(!sn(e))throw new Error("Expected private key: 0 < key < n");return e}function hn(t){if(t instanceof Le)return t.assertValidity(),t;try{return Le.fromDER(t)}catch(e){return Le.fromCompact(t)}}function fn(t){return Je(t.length>Ee?t.slice(0,Ee):t)}function dn(t){const e=fn(t),n=Ye(e,ve.n);return ln(n<ge?e:n)}function ln(t){return Ke(t)}const pn={strict:!0};function yn(t,e,n,r=pn){let i;try{i=hn(t),e=Xe(e)}catch(t){return!1}const{r:o,s}=i;if(r.strict&&i.hasHighS())return!1;const a=en(e);let c;try{c=function(t){return t instanceof He?(t.assertValidity(),t):He.fromHex(t)}(n)}catch(t){return!1}const{n:u}=ve,h=tn(s,u),f=Ye(a*h,u),d=Ye(o*h,u),l=He.BASE.multiplyAndAddUnsafe(c,f,d);return!!l&&Ye(l.x,u)===o}He.BASE._setWindowSize(8);const gn={node:ye,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},wn={},bn={bytesToHex:Ve,hexToBytes:qe,concatBytes:je,mod:Ye,invert:tn,isValidPrivateKey(t){try{return un(t),!0}catch(t){return!1}},_bigintTo32Bytes:Ke,_normalizePrivateKey:un,hashToPrivateKey:t=>{t=Xe(t);const e=xe+8;if(t.length<e||t.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");return Ke(Ye(Je(t),ve.n-we)+we)},randomBytes:(t=32)=>{if(gn.web)return gn.web.getRandomValues(new Uint8Array(t));if(gn.node){const{randomBytes:e}=gn.node;return Uint8Array.from(e(t))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>bn.hashToPrivateKey(bn.randomBytes(xe+8)),precompute(t=8,e=He.BASE){const n=e===He.BASE?e:new He(e.x,e.y);return n._setWindowSize(t),n.multiply(me),n},sha256:async(...t)=>{if(gn.web){const e=await gn.web.subtle.digest("SHA-256",je(...t));return new Uint8Array(e)}if(gn.node){const{createHash:e}=gn.node,n=e("sha256");return t.forEach((t=>n.update(t))),Uint8Array.from(n.digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(t,...e)=>{if(gn.web){const n=await gn.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),r=je(...e),i=await gn.web.subtle.sign("HMAC",n,r);return new Uint8Array(i)}if(gn.node){const{createHmac:n}=gn.node,r=n("sha256",t);return e.forEach((t=>r.update(t))),Uint8Array.from(r.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(t,...e)=>{let n=wn[t];if(void 0===n){const e=await bn.sha256(Uint8Array.from(t,(t=>t.charCodeAt(0))));n=je(e,e),wn[t]=n}return bn.sha256(n,...e)},taggedHashSync:(t,...e)=>{if("function"!=typeof nn)throw new Oe("sha256Sync is undefined, you need to set it");let n=wn[t];if(void 0===n){const e=nn(Uint8Array.from(t,(t=>t.charCodeAt(0))));n=je(e,e),wn[t]=n}return nn(n,...e)},_JacobianPoint:$e};Object.defineProperties(bn,{sha256Sync:{configurable:!1,get:()=>nn,set(t){nn||(nn=t)}},hmacSha256Sync:{configurable:!1,get:()=>rn,set(t){rn||(rn=t)}}});var mn=i(870),Sn=i(907),vn=i.n(Sn);class Cn extends wt{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,lt.hash(t);const n=gt(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?t.create().update(n).digest():n);for(let t=0;t<i.length;t++)i[t]^=54;this.iHash.update(i),this.oHash=t.create();for(let t=0;t<i.length;t++)i[t]^=106;this.oHash.update(i),i.fill(0)}update(t){return lt.exists(this),this.iHash.update(t),this}digestInto(t){lt.exists(this),lt.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:r,destroyed:i,blockLen:o,outputLen:s}=this;return t.finished=r,t.destroyed=i,t.blockLen=o,t.outputLen=s,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const An=(t,e,n)=>new Cn(t,e).update(n).digest();An.create=(t,e)=>new Cn(t,e);const En=32;var xn,Tn,Pn,Bn;(Bn=xn||(xn={}))[Bn.Testnet=2147483648]="Testnet",Bn[Bn.Mainnet=1]="Mainnet",(Pn=Tn||(Tn={}))[Pn.Mainnet=0]="Mainnet",Pn[Pn.Testnet=128]="Testnet";const In=33;function Un(t){if(A(t).byteLength!=L)throw Error("Invalid signature");return{type:z.MessageSignature,data:t}}function On(t,e){switch(t){case rt.SerializeP2PKH:switch(e){case Y.Mainnet:return it.MainnetSingleSig;case Y.Testnet:return it.TestnetSingleSig;default:throw new Error(`Unexpected txVersion ${JSON.stringify(e)} for hashMode ${t}`)}case rt.SerializeP2SH:case rt.SerializeP2WPKH:case rt.SerializeP2WSH:switch(e){case Y.Mainnet:return it.MainnetMultiSig;case Y.Testnet:return it.TestnetMultiSig;default:throw new Error(`Unexpected txVersion ${JSON.stringify(e)} for hashMode ${t}`)}default:throw new Error(`Unexpected hashMode ${JSON.stringify(t)}`)}}function kn(t,e){return{type:z.Address,version:t,hash160:e}}function $n(t){return(0,mn.H4)(t.version,t.hash160)}var _n=Object.defineProperty,Nn=Object.defineProperties,Hn=Object.getOwnPropertyDescriptors,Fn=Object.getOwnPropertySymbols,Mn=Object.prototype.hasOwnProperty,Ln=Object.prototype.propertyIsEnumerable,jn=(t,e,n)=>e in t?_n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Rn=(t,e)=>{for(var n in e||(e={}))Mn.call(e,n)&&jn(t,n,e[n]);if(Fn)for(var n of Fn(e))Ln.call(e,n)&&jn(t,n,e[n]);return t},Vn=(t,e)=>Nn(t,Hn(e));function Dn(t,e=Y.Mainnet){return zn(Yn(t).data,e)}function zn(t,e=Y.Mainnet){return t="string"==typeof t?t:C(t),$n(kn(On(rt.SerializeP2PKH,e),Yi(A(t))))}function Kn(t){return{type:z.PublicKey,data:A(t)}}function Gn(t,e,n=ot.Compressed){const r=function(t){if(t.length<2*En*2+1)throw new Error("Invalid signature");const e=t.slice(0,2),n=t.slice(2,2+2*En),r=t.slice(2+2*En);return{recoveryId:m(e),r:n,s:r}}(e.data),i=new Le(w(r.r),w(r.s)),o=He.fromSignature(t,i,r.recoveryId),s=n===ot.Compressed;return o.toHex(s)}function Wn(t,e,n=ot.Compressed){return Gn(t,Vn(Rn({},e),{data:(r=e.data,r.slice(-2)+r.slice(0,-2))}),n);var r}function qn(t){return{type:z.PublicKey,data:t}}function Jn(t){return!C(t.data).startsWith("04")}function Xn(t){return C(t.data)}function Zn(t){return t.data.slice()}function Yn(t){const e=er(t),n=function(t,e=!1){return He.fromPrivateKey(t).toRawBytes(e)}(e.data.slice(0,32),e.compressed);return Kn(C(n))}function Qn(t){const e="string"==typeof t?t:C(t);return Kn(He.fromHex(e).toHex(!0))}function tr(t){const e=t.readUInt8(),n=4!==e?j:R;return qn(O([e,t.readBytes(n)]))}function er(t){const e=function(t){const e="string"==typeof t?A(t):t;if(32!=e.length&&33!=e.length)throw new Error(`Improperly formatted private-key. Private-key byte length should be 32 or 33. Length provided: ${e.length}`);if(33==e.length&&1!==e[32])throw new Error("Improperly formatted private-key. 33 bytes indicate compressed key, but the last byte must be == 01");return e}(t);return{data:e,compressed:e.length==In}}function nr(){return er(bn.randomPrivateKey())}function rr(t,e){const[n,r]=function(t,e,n={}){const{seed:r,m:i,d:o}=function(t,e,n){if(null==t)throw new Error(`sign: expected valid message hash, not "${t}"`);const r=Xe(t),i=un(e),o=[ln(i),dn(r)];if(null!=n){!0===n&&(n=bn.randomBytes(Ee));const t=Xe(n);if(t.length!==Ee)throw new Error(`sign: Expected ${Ee} bytes of extra data`);o.push(t)}return{seed:je(...o),m:fn(r),d:i}}(t,e,n.extraEntropy),s=new on(Te,xe);let a;for(s.reseedSync(r);!(a=cn(s.generateSync(),i,o,n.canonical));)s.reseedSync();return function(t,e){const{sig:n,recovery:r}=t,{der:i,recovered:o}=Object.assign({canonical:!0,der:!0},e),s=i?n.toDERRawBytes():n.toCompactRawBytes();return o?[s,r]:s}(a,n)}(e,t.data.slice(0,32),{canonical:!0,recovered:!0});if(null==r)throw new Error("No signature recoveryId received");return Un(b(r,1)+Le.fromHex(n).toCompactHex())}function ir({messageHash:t,privateKey:e}){const n=rr(e,t);return Vn(Rn({},n),{data:(r=n.data,r.slice(2)+r.slice(0,2))});var r}function or(t){return Yn(t.data)}function sr(t){return C(t.data)}function ar(t,e){return(0,mn.H4)(t,C(Zi(e.data)))}function cr(t){const[e,n,r]=t.split(/\.|::/);return hr(e,n,r)}function ur(t,e,n){const r=e||1,i=n||N;if(Wi(t,i))throw new Error(`String length exceeds maximum bytes ${i}`);return{type:z.LengthPrefixedString,content:t,lengthPrefixBytes:r,maxLengthBytes:i}}function hr(t,e,n){return{type:z.AssetInfo,address:fr(t),contractName:ur(e),assetName:ur(n)}}function fr(t){const e=(0,mn.yI)(t);return{type:z.Address,version:e[0],hash160:e[1]}}function dr(t){if(t.includes(".")){const[e,n]=t.split(".");return lr(e,n)}return pr(t)}function lr(t,e){const n=fr(t),r=ur(e);return{type:z.Principal,prefix:ct.Contract,address:n,contractName:r}}function pr(t){const e=fr(t);return{type:z.Principal,prefix:ct.Standard,address:e}}bn.hmacSha256Sync=(t,...e)=>{const n=An.create(Rt,t);return e.forEach((t=>n.update(t))),n.digest()};var yr=(t=>(t[t.Int=0]="Int",t[t.UInt=1]="UInt",t[t.Buffer=2]="Buffer",t[t.BoolTrue=3]="BoolTrue",t[t.BoolFalse=4]="BoolFalse",t[t.PrincipalStandard=5]="PrincipalStandard",t[t.PrincipalContract=6]="PrincipalContract",t[t.ResponseOk=7]="ResponseOk",t[t.ResponseErr=8]="ResponseErr",t[t.OptionalNone=9]="OptionalNone",t[t.OptionalSome=10]="OptionalSome",t[t.List=11]="List",t[t.Tuple=12]="Tuple",t[t.StringASCII=13]="StringASCII",t[t.StringUTF8=14]="StringUTF8",t))(yr||{});const gr=BigInt("0xffffffffffffffffffffffffffffffff"),wr=BigInt(0),br=BigInt("0x7fffffffffffffffffffffffffffffff"),mr=BigInt("-170141183460469231731687303715884105728"),Sr=t=>{const e=y(t,!0);if(e>br)throw new RangeError(`Cannot construct clarity integer from value greater than ${br}`);if(e<mr)throw new RangeError(`Cannot construct clarity integer form value less than ${mr}`);return{type:yr.Int,value:e}},vr=t=>{const e=y(t,!1);if(e<wr)throw new RangeError("Cannot construct unsigned clarity integer from negative value");if(e>gr)throw new RangeError(`Cannot construct unsigned clarity integer greater than ${gr}`);return{type:yr.UInt,value:e}},Cr=t=>{if(t.length>1e6)throw new Error("Cannot construct clarity buffer that is greater than 1MB");return{type:yr.Buffer,buffer:t}},Ar=t=>Cr(E(t)),Er=()=>({type:yr.BoolTrue}),xr=()=>({type:yr.BoolFalse}),Tr=t=>t?Er():xr();function Pr(t){if(t.type===yr.PrincipalStandard)return $n(t.address);if(t.type===yr.PrincipalContract)return`${$n(t.address)}.${t.contractName.content}`;throw new Error(`Unexpected principal data: ${JSON.stringify(t)}`)}function Br(t){if(t.includes(".")){const[e,n]=t.split(".");return Or(e,n)}return Ir(t)}function Ir(t){const e=fr(t);return{type:yr.PrincipalStandard,address:e}}function Ur(t){return{type:yr.PrincipalStandard,address:t}}function Or(t,e){return kr(fr(t),ur(e))}function kr(t,e){if(E(e.content).byteLength>=128)throw new Error("Contract name must be less than 128 bytes");return{type:yr.PrincipalContract,address:t,contractName:e}}function $r(t,e){const n=ur(e);return{type:yr.PrincipalContract,address:t.address,contractName:n}}function _r(t){return{type:yr.ResponseErr,value:t}}function Nr(t){return{type:yr.ResponseOk,value:t}}function Hr(){return{type:yr.OptionalNone}}function Fr(t){return{type:yr.OptionalSome,value:t}}function Mr(t){return t?Fr(t):Hr()}function Lr(t){return{type:yr.List,list:t}}function jr(t){for(const e in t)if(!no(e))throw new Error(`"${e}" is not a valid Clarity name`);return{type:yr.Tuple,data:t}}const Rr=new Map;function Vr(t,e){const n=Rr.get(t);if(void 0!==n)return n(e);const r=function(t){const e=Object.values(t).filter((t=>"number"==typeof t)),n=new Set(e);return t=>n.has(t)}(t);return Rr.set(t,r),Vr(t,e)}class Dr{constructor(t){this.consumed=0,this.source=t}readBytes(t){const e=this.source.subarray(this.consumed,this.consumed+t);return this.consumed+=t,e}readUInt32BE(){return(t=this.readBytes(4))[0]*2**24+65536*t[1]+256*t[2]+t[3];var t}readUInt8(){return this.readBytes(1)[0]}readUInt16BE(){return((t=this.readBytes(2))[0+0]<<8|t[1])>>>0;var t}readBigUIntLE(t){const e=C(this.readBytes(t).slice().reverse());return BigInt(`0x${e}`)}readBigUIntBE(t){const e=C(this.readBytes(t));return BigInt(`0x${e}`)}get readOffset(){return this.consumed}set readOffset(t){this.consumed=t}get internalBytes(){return this.source}readUInt8Enum(t,e){const n=this.readUInt8();if(Vr(t,n))return n;throw e(n)}}class zr extends Error{constructor(t){super(t),this.message=t,this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class Kr extends zr{constructor(t){super(t)}}class Gr extends zr{constructor(t){super(t)}}class Wr extends zr{constructor(t){super(t)}}class qr extends zr{constructor(t){super(t)}}class Jr extends zr{constructor(t){super(t)}}class Xr extends zr{constructor(t){super(t)}}const Zr=t=>({type:yr.StringASCII,data:t}),Yr=t=>({type:yr.StringUTF8,data:t}),Qr=(t,e)=>{switch(e){case"ascii":case"utf8":return Zr(t)}};function ti(t){let e;if("string"==typeof t){const n="0x"===t.slice(0,2).toLowerCase();e=new Dr(A(n?t.slice(2):t))}else e=t instanceof Uint8Array?new Dr(t):t;switch(e.readUInt8Enum(yr,(t=>{throw new Gr(`Cannot recognize Clarity Type: ${t}`)}))){case yr.Int:return Sr(e.readBytes(16));case yr.UInt:return vr(e.readBytes(16));case yr.Buffer:const t=e.readUInt32BE();return Cr(e.readBytes(t));case yr.BoolTrue:return Er();case yr.BoolFalse:return xr();case yr.PrincipalStandard:return Ur(Ei(e));case yr.PrincipalContract:return kr(Ei(e),Bi(e));case yr.ResponseOk:return Nr(ti(e));case yr.ResponseErr:return _r(ti(e));case yr.OptionalNone:return Hr();case yr.OptionalSome:return Fr(ti(e));case yr.List:const n=e.readUInt32BE(),r=[];for(let t=0;t<n;t++)r.push(ti(e));return Lr(r);case yr.Tuple:const i=e.readUInt32BE(),o={};for(let t=0;t<i;t++){const t=Bi(e).content;if(void 0===t)throw new Gr('"content" is undefined');o[t]=ti(e)}return jr(o);case yr.StringASCII:const s=e.readUInt32BE(),a=P(e.readBytes(s));return Zr(a);case yr.StringUTF8:const c=e.readUInt32BE(),u=x(e.readBytes(c));return Yr(u);default:throw new Gr("Unable to deserialize Clarity Value from Uint8Array. Could not find valid Clarity Type.")}}function ei(t){return t.payloadType===G.TokenTransfer}function ni(t){return t.payloadType===G.ContractCall}function ri(t){return t.payloadType===G.SmartContract}function ii(t){return t.payloadType===G.PoisonMicroblock}function oi(t){return t.payloadType===G.Coinbase}function si(t,e,n){return"string"==typeof t&&(t=Br(t)),"string"==typeof n&&(n=Ui(n)),{type:z.Payload,payloadType:G.TokenTransfer,recipient:t,amount:y(e,!1),memo:null!=n?n:Ui("")}}function ai(t,e,n,r){return"string"==typeof t&&(t=fr(t)),"string"==typeof e&&(e=ur(e)),"string"==typeof n&&(n=ur(n)),{type:z.Payload,payloadType:G.ContractCall,contractAddress:t,contractName:e,functionName:n,functionArgs:r}}function ci(t,e,n){return"string"==typeof t&&(t=ur(t)),"string"==typeof e&&(e=Ii(e)),"number"==typeof n?{type:z.Payload,payloadType:G.VersionedSmartContract,clarityVersion:n,contractName:t,codeBody:e}:{type:z.Payload,payloadType:G.SmartContract,contractName:t,codeBody:e}}function ui(t,e){if(t.byteLength!=M)throw Error(`Coinbase buffer size must be ${M} bytes`);return null!=e?{type:z.Payload,payloadType:G.CoinbaseToAltRecipient,coinbaseBytes:t,recipient:e}:{type:z.Payload,payloadType:G.Coinbase,coinbaseBytes:t}}function hi(t){const e=[];switch(e.push(t.payloadType),t.payloadType){case G.TokenTransfer:e.push(Vi(t.recipient)),e.push(p(t.amount,!1,8)),e.push(bi(t.memo));break;case G.ContractCall:e.push(bi(t.contractAddress)),e.push(bi(t.contractName)),e.push(bi(t.functionName));const n=new Uint8Array(4);k(n,t.functionArgs.length,0),e.push(n),t.functionArgs.forEach((t=>{e.push(Vi(t))}));break;case G.SmartContract:e.push(bi(t.contractName)),e.push(bi(t.codeBody));break;case G.VersionedSmartContract:e.push(t.clarityVersion),e.push(bi(t.contractName)),e.push(bi(t.codeBody));break;case G.PoisonMicroblock:break;case G.Coinbase:e.push(t.coinbaseBytes);break;case G.CoinbaseToAltRecipient:e.push(t.coinbaseBytes),e.push(Vi(t.recipient))}return O(e)}function fi(t){switch(t.readUInt8Enum(G,(t=>{throw new Error(`Cannot recognize PayloadType: ${t}`)}))){case G.TokenTransfer:return si(ti(t),y(t.readBytes(8),!1),ki(t));case G.ContractCall:const e=Ei(t),n=Bi(t),r=Bi(t),i=[],o=t.readUInt32BE();for(let e=0;e<o;e++){const e=ti(t);i.push(e)}return ai(e,n,r,i);case G.SmartContract:return ci(Bi(t),Bi(t,4,1e5));case G.VersionedSmartContract:{const e=t.readUInt8Enum(W,(t=>{throw new Error(`Cannot recognize ClarityVersion: ${t}`)}));return ci(Bi(t),Bi(t,4,1e5),e)}case G.PoisonMicroblock:return{type:z.Payload,payloadType:G.PoisonMicroblock};case G.Coinbase:return ui(t.readBytes(M));case G.CoinbaseToAltRecipient:return ui(t.readBytes(M),ti(t))}}var di=(t=>(t[t.PublicKeyCompressed=0]="PublicKeyCompressed",t[t.PublicKeyUncompressed=1]="PublicKeyUncompressed",t[t.SignatureCompressed=2]="SignatureCompressed",t[t.SignatureUncompressed=3]="SignatureUncompressed",t))(di||{});function li(t){return Un(C(t.readBytes(L)))}function pi(t,e){return{pubKeyEncoding:t,type:z.TransactionAuthField,contents:e}}function yi(t){const e=t.readUInt8Enum(di,(t=>{throw new Gr(`Could not read ${t} as AuthFieldType`)}));switch(e){case 0:return pi(ot.Compressed,tr(t));case 1:return pi(ot.Uncompressed,tr(t));case 2:return pi(ot.Compressed,li(t));case 3:return pi(ot.Uncompressed,li(t));default:throw new Error(`Unknown auth field type: ${JSON.stringify(e)}`)}}function gi(t){return A(t.data)}function wi(t){const e=[];switch(t.contents.type){case z.PublicKey:t.pubKeyEncoding==ot.Compressed?(e.push(0),e.push(Zn(t.contents))):(e.push(1),e.push(Zn(Qn(t.contents.data))));break;case z.MessageSignature:t.pubKeyEncoding==ot.Compressed?e.push(2):e.push(3),e.push(gi(t.contents))}return O(e)}function bi(t){switch(t.type){case z.Address:return Ai(t);case z.Principal:return xi(t);case z.LengthPrefixedString:return Pi(t);case z.MemoString:return Oi(t);case z.AssetInfo:return $i(t);case z.PostCondition:return Mi(t);case z.PublicKey:return Zn(t);case z.LengthPrefixedList:return Hi(t);case z.Payload:return hi(t);case z.TransactionAuthField:return wi(t);case z.MessageSignature:return gi(t)}}function mi(t,e,n){switch(e){case z.Address:return Ei(t);case z.Principal:return Ti(t);case z.LengthPrefixedString:return Bi(t);case z.MemoString:return ki(t);case z.AssetInfo:return _i(t);case z.PostCondition:return Li(t);case z.PublicKey:return tr(t);case z.Payload:return fi(t);case z.LengthPrefixedList:if(!n)throw new Gr("No List Type specified");return Fi(t,n);case z.MessageSignature:return li(t);default:throw new Error("Could not recognize StacksMessageType")}}function Si(){return{type:z.Address,version:it.MainnetSingleSig,hash160:"0".repeat(40)}}function vi(t,e,n){return kn(On(t,e),n)}function Ci(t,e,n,r){if(0===r.length)throw Error("Invalid number of public keys");if(!(e!==rt.SerializeP2PKH&&e!==rt.SerializeP2WPKH||1===r.length&&1===n))throw Error("Invalid number of public keys or signatures");if(e===rt.SerializeP2WPKH||e===rt.SerializeP2WSH)for(let t=0;t<r.length;t++)if(!Jn(r[t]))throw Error("Public keys must be compressed for segwit");switch(e){case rt.SerializeP2PKH:return kn(t,Yi(r[0].data));case rt.SerializeP2WPKH:return kn(t,Qi(r[0].data));case rt.SerializeP2SH:return kn(t,to(n,r.map(Zn)));case rt.SerializeP2WSH:return kn(t,eo(n,r.map(Zn)))}}function Ai(t){const e=[];return e.push(A(b(t.version,1))),e.push(A(t.hash160)),O(e)}function Ei(t){const e=m(C(t.readBytes(1))),n=C(t.readBytes(20));return{type:z.Address,version:e,hash160:n}}function xi(t){const e=[];return e.push(t.prefix),e.push(Ai(t.address)),t.prefix===ct.Contract&&e.push(Pi(t.contractName)),O(e)}function Ti(t){const e=t.readUInt8Enum(ct,(t=>{throw new Gr(`Unexpected Principal payload type: ${t}`)})),n=Ei(t);if(e===ct.Standard)return{type:z.Principal,prefix:e,address:n};const r=Bi(t);return{type:z.Principal,prefix:e,address:n,contractName:r}}function Pi(t){const e=[],n=E(t.content),r=n.byteLength;return e.push(A(b(r,t.lengthPrefixBytes))),e.push(n),O(e)}function Bi(t,e,n){e=e||1;const r=m(C(t.readBytes(e)));return ur(x(t.readBytes(r)),e,null!=n?n:128)}function Ii(t){return ur(t,4,1e5)}function Ui(t){if(t&&Wi(t,V))throw new Error(`Memo exceeds maximum length of ${V} bytes`);return{type:z.MemoString,content:t}}function Oi(t){const e=[],n=E(t.content),r=Gi(C(n),2*V);return e.push(A(r)),O(e)}function ki(t){const e=x(t.readBytes(V));return{type:z.MemoString,content:e}}function $i(t){const e=[];return e.push(Ai(t.address)),e.push(Pi(t.contractName)),e.push(Pi(t.assetName)),O(e)}function _i(t){return{type:z.AssetInfo,address:Ei(t),contractName:Bi(t),assetName:Bi(t)}}function Ni(t,e){return{type:z.LengthPrefixedList,lengthPrefixBytes:e||4,values:t}}function Hi(t){const e=t.values,n=[];n.push(A(b(e.length,t.lengthPrefixBytes)));for(const t of e)n.push(bi(t));return O(n)}function Fi(t,e,n){const r=m(C(t.readBytes(n||4))),i=[];for(let n=0;n<r;n++)switch(e){case z.Address:i.push(Ei(t));break;case z.LengthPrefixedString:i.push(Bi(t));break;case z.MemoString:i.push(ki(t));break;case z.AssetInfo:i.push(_i(t));break;case z.PostCondition:i.push(Li(t));break;case z.PublicKey:i.push(tr(t));break;case z.TransactionAuthField:i.push(yi(t))}return Ni(i,n)}function Mi(t){const e=[];return e.push(t.conditionType),e.push(xi(t.principal)),t.conditionType!==et.Fungible&&t.conditionType!==et.NonFungible||e.push($i(t.assetInfo)),t.conditionType===et.NonFungible&&e.push(Vi(t.assetName)),e.push(t.conditionCode),t.conditionType!==et.STX&&t.conditionType!==et.Fungible||e.push(p(t.amount,!1,8)),O(e)}function Li(t){const e=t.readUInt8Enum(et,(t=>{throw new Gr(`Could not read ${t} as PostConditionType`)})),n=Ti(t);let r,i,o;switch(e){case et.STX:return r=t.readUInt8Enum(st,(t=>{throw new Gr(`Could not read ${t} as FungibleConditionCode`)})),o=BigInt(`0x${C(t.readBytes(8))}`),{type:z.PostCondition,conditionType:et.STX,principal:n,conditionCode:r,amount:o};case et.Fungible:return i=_i(t),r=t.readUInt8Enum(st,(t=>{throw new Gr(`Could not read ${t} as FungibleConditionCode`)})),o=BigInt(`0x${C(t.readBytes(8))}`),{type:z.PostCondition,conditionType:et.Fungible,principal:n,conditionCode:r,amount:o,assetInfo:i};case et.NonFungible:i=_i(t);const e=ti(t);return r=t.readUInt8Enum(at,(t=>{throw new Gr(`Could not read ${t} as FungibleConditionCode`)})),{type:z.PostCondition,conditionType:et.NonFungible,principal:n,conditionCode:r,assetInfo:i,assetName:e}}}function ji(t,e){return O([t,e])}function Ri(t,e){const n=[],r="ascii"==e?T(t.data):E(t.data),i=new Uint8Array(4);return k(i,r.length,0),n.push(i),n.push(r),ji(t.type,O(n))}function Vi(t){switch(t.type){case yr.BoolTrue:case yr.BoolFalse:return function(t){return new Uint8Array([t.type])}(t);case yr.OptionalNone:case yr.OptionalSome:return(e=t).type===yr.OptionalNone?new Uint8Array([e.type]):ji(e.type,Vi(e.value));case yr.Buffer:return function(t){const e=new Uint8Array(4);return k(e,t.buffer.length,0),ji(t.type,U(e,t.buffer))}(t);case yr.UInt:return function(t){const e=S(t.value,F);return ji(t.type,e)}(t);case yr.Int:return function(t){const e=S(function(t,e){if(t<-(BigInt(1)<<e-BigInt(1))||(BigInt(1)<<e-BigInt(1))-BigInt(1)<t)throw`Unable to represent integer in width: ${e}`;return t>=BigInt(0)?BigInt(t):t+(BigInt(1)<<e)}(t.value,BigInt(H)),F);return ji(t.type,e)}(t);case yr.PrincipalStandard:return function(t){return ji(t.type,Ai(t.address))}(t);case yr.PrincipalContract:return function(t){return ji(t.type,U(Ai(t.address),Pi(t.contractName)))}(t);case yr.ResponseOk:case yr.ResponseErr:return function(t){return ji(t.type,Vi(t.value))}(t);case yr.List:return function(t){const e=[],n=new Uint8Array(4);k(n,t.list.length,0),e.push(n);for(const n of t.list){const t=Vi(n);e.push(t)}return ji(t.type,O(e))}(t);case yr.Tuple:return function(t){const e=[],n=new Uint8Array(4);k(n,Object.keys(t.data).length,0),e.push(n);const r=Object.keys(t.data).sort(((t,e)=>t.localeCompare(e)));for(const n of r){const r=ur(n);e.push(Pi(r));const i=Vi(t.data[n]);e.push(i)}return ji(t.type,O(e))}(t);case yr.StringASCII:return function(t){return Ri(t,"ascii")}(t);case yr.StringUTF8:return function(t){return Ri(t,"utf8")}(t);default:throw new Kr("Unable to serialize. Invalid Clarity Value.")}var e}const Di=t=>bn.randomBytes(t),zi=t=>t.length%2==0?t:`0${t}`,Ki=(t,e)=>t.padStart(e,"0"),Gi=(t,e)=>t.padEnd(e,"0"),Wi=(t,e)=>!!t&&E(t).length>e;function qi(t){return vn()(t)}function Ji(t,e){const n=qi(t);return delete n[e],n}const Xi=t=>C(le(t)),Zi=t=>_t(Rt(t)),Yi=t=>C(Zi(t)),Qi=t=>{const e=Zi(t),n=U(new Uint8Array([0]),new Uint8Array([e.length]),e);return C(Zi(n))},to=(t,e)=>{if(t>15||e.length>15)throw Error("P2SH multisig address can only contain up to 15 public keys");const n=[];n.push(80+t),e.forEach((t=>{n.push(t.length),n.push(t)})),n.push(80+e.length),n.push(174);const r=O(n);return C(Zi(r))},eo=(t,e)=>{if(t>15||e.length>15)throw Error("P2WSH multisig address can only contain up to 15 public keys");const n=[];n.push(80+t),e.forEach((t=>{n.push(t.length),n.push(t)})),n.push(80+e.length),n.push(174);const r=O(n),i=Rt(r),o=[];o.push(0),o.push(i.length),o.push(i);const s=O(o);return C(Zi(s))};function no(t){return/^[a-zA-Z]([a-zA-Z0-9]|[-_!?+<>=/*])*$|^[-+=/*]$|^[<>]=?$/.test(t)&&t.length<128}function ro(t){return`0x${C(Vi(t))}`}function io(t){return ti(t)}const oo=t=>{if(t.okay)return io(t.result);throw new Error(t.cause)},so=t=>{try{return(0,mn.yI)(t),!0}catch(t){return!1}},ao=t=>{if("success"===t)return!0;const e=g(t).toLowerCase();return 66===e.length&&g(BigInt(e).toString(16).padStart(64,"0"))===e};var co=Object.defineProperty,uo=Object.defineProperties,ho=Object.getOwnPropertyDescriptors,fo=Object.getOwnPropertySymbols,lo=Object.prototype.hasOwnProperty,po=Object.prototype.propertyIsEnumerable,yo=(t,e,n)=>e in t?co(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,go=(t,e)=>{for(var n in e||(e={}))lo.call(e,n)&&yo(t,n,e[n]);if(fo)for(var n of fo(e))po.call(e,n)&&yo(t,n,e[n]);return t},wo=(t,e)=>uo(t,ho(e));function bo(){return{type:z.MessageSignature,data:C(new Uint8Array(L))}}function mo(t,e,n,r){const i=Ci(0,t,1,[Kn(e)]).hash160,o=Jn(Kn(e))?ot.Compressed:ot.Uncompressed;return{hashMode:t,signer:i,nonce:y(n,!1),fee:y(r,!1),keyEncoding:o,signature:bo()}}function So(t,e,n,r,i){return{hashMode:t,signer:Ci(0,t,e,n.map(Kn)).hash160,nonce:y(r,!1),fee:y(i,!1),fields:[],signaturesRequired:e}}function vo(t){return"signature"in t}function Co(t){const e=qi(t);return e.nonce=0,e.fee=0,vo(e)?e.signature=bo():e.fields=[],wo(go({},e),{nonce:BigInt(0),fee:BigInt(0)})}function Ao(t){return O([t.hashMode,A(t.signer),p(t.nonce,!1,8),p(t.fee,!1,8),t.keyEncoding,gi(t.signature)])}function Eo(t){const e=[t.hashMode,A(t.signer),p(t.nonce,!1,8),p(t.fee,!1,8)],n=Ni(t.fields);e.push(Hi(n));const r=new Uint8Array(2);var i,o;return i=r,o=t.signaturesRequired,i[0+0]=o>>>8,i[1]=o>>>0,e.push(r),O(e)}function xo(t,e){const n=C(e.readBytes(20)),r=BigInt(`0x${C(e.readBytes(8))}`),i=BigInt(`0x${C(e.readBytes(8))}`),o=e.readUInt8Enum(ot,(t=>{throw new Gr(`Could not parse ${t} as PubKeyEncoding`)}));if(t===rt.SerializeP2WPKH&&o!=ot.Compressed)throw new Gr("Failed to parse singlesig spending condition: incomaptible hash mode and key encoding");return{hashMode:t,signer:n,nonce:r,fee:i,keyEncoding:o,signature:li(e)}}function To(t,e){const n=C(e.readBytes(20)),r=BigInt("0x"+C(e.readBytes(8))),i=BigInt("0x"+C(e.readBytes(8))),o=Fi(e,z.TransactionAuthField).values;let s=!1,a=0;for(const t of o)switch(t.contents.type){case z.PublicKey:Jn(t.contents)||(s=!0);break;case z.MessageSignature:if(t.pubKeyEncoding===ot.Uncompressed&&(s=!0),a+=1,65536===a)throw new Xr("Failed to parse multisig spending condition: too many signatures")}const c=e.readUInt16BE();if(s&&t===rt.SerializeP2SH)throw new Xr("Uncompressed keys are not allowed in this hash mode");return{hashMode:t,signer:n,nonce:r,fee:i,fields:o,signaturesRequired:c}}function Po(t){return vo(t)?Ao(t):Eo(t)}function Bo(t){const e=t.readUInt8Enum(rt,(t=>{throw new Gr(`Could not parse ${t} as AddressHashMode`)}));return e===rt.SerializeP2PKH||e===rt.SerializeP2WPKH?xo(e,t):To(e,t)}function Io(t,e,n,r){const i=t+C(new Uint8Array([e]))+C(p(n,!1,8))+C(p(r,!1,8));if(49!==A(i).byteLength)throw Error("Invalid signature hash length");return Xi(A(i))}function Uo(t,e,n){const r=33+L,i=Jn(e)?ot.Compressed:ot.Uncompressed,o=A(t+zi(i.toString(16))+n.data);if(o.byteLength>r)throw Error("Invalid signature hash length");return Xi(o)}function Oo(t,e,n,r,i){const o=Io(t,e,n,r),s=rr(i,o);return{nextSig:s,nextSigHash:Uo(o,or(i),s)}}function ko(t,e,n,r,i,o){const s=Io(t,e,n,r),a=Kn(Gn(s,o,i));return{pubKey:a,nextSigHash:Uo(s,a,o)}}function $o(t){return{authType:nt.Standard,spendingCondition:t}}function _o(t,e){return{authType:nt.Sponsored,spendingCondition:t,sponsorSpendingCondition:e||mo(rt.SerializeP2PKH,"0".repeat(66),0,0)}}function No(t){if(t.spendingCondition)switch(t.authType){case nt.Standard:return $o(Co(t.spendingCondition));case nt.Sponsored:return _o(Co(t.spendingCondition),function(){const t=mo(rt.SerializeP2PKH,"",0,0);return t.signer=Si().hash160,t.keyEncoding=ot.Compressed,t.signature=bo(),t}());default:throw new Jr("Unexpected authorization type for signing")}throw new Error("Authorization missing SpendingCondition")}function Ho(t,e){switch(t.authType){case nt.Standard:case nt.Sponsored:return function(t,e,n){return vo(t)?function(t,e,n){const{pubKey:r,nextSigHash:i}=ko(e,n,t.fee,t.nonce,t.keyEncoding,t.signature),o=Ci(0,t.hashMode,1,[r]).hash160;if(o!==t.signer)throw new Xr(`Signer hash does not equal hash of public key(s): ${o} != ${t.signer}`);return i}(t,e,n):function(t,e,n){const r=[];let i=e,o=!1,s=0;for(const e of t.fields){let a;switch(e.contents.type){case z.PublicKey:Jn(e.contents)||(o=!0),a=e.contents;break;case z.MessageSignature:e.pubKeyEncoding===ot.Uncompressed&&(o=!0);const{pubKey:r,nextSigHash:c}=ko(i,n,t.fee,t.nonce,e.pubKeyEncoding,e.contents);if(i=c,a=r,s+=1,65536===s)throw new Xr("Too many signatures")}r.push(a)}if(s!==t.signaturesRequired)throw new Xr("Incorrect number of signatures");if(o&&t.hashMode===rt.SerializeP2SH)throw new Xr("Uncompressed keys are not allowed in this hash mode");const a=Ci(0,t.hashMode,t.signaturesRequired,r).hash160;if(a!==t.signer)throw new Xr(`Signer hash does not equal hash of public key(s): ${a} != ${t.signer}`);return i}(t,e,n)}(t.spendingCondition,e,nt.Standard);default:throw new Jr("Invalid origin auth type")}}function Fo(t,e){switch(t.authType){case nt.Standard:const n=wo(go({},t.spendingCondition),{fee:y(e,!1)});return wo(go({},t),{spendingCondition:n});case nt.Sponsored:const r=wo(go({},t.sponsorSpendingCondition),{fee:y(e,!1)});return wo(go({},t),{sponsorSpendingCondition:r})}}function Mo(t){switch(t.authType){case nt.Standard:return t.spendingCondition.fee;case nt.Sponsored:return t.sponsorSpendingCondition.fee}}function Lo(t,e){const n=wo(go({},t.spendingCondition),{nonce:y(e,!1)});return wo(go({},t),{spendingCondition:n})}function jo(t,e){const n=wo(go({},t.sponsorSpendingCondition),{nonce:y(e,!1)});return wo(go({},t),{sponsorSpendingCondition:n})}function Ro(t,e){const n=wo(go({},e),{nonce:y(e.nonce,!1),fee:y(e.fee,!1)});return wo(go({},t),{sponsorSpendingCondition:n})}function Vo(t){const e=[];switch(e.push(t.authType),t.authType){case nt.Standard:e.push(Po(t.spendingCondition));break;case nt.Sponsored:e.push(Po(t.spendingCondition)),e.push(Po(t.sponsorSpendingCondition))}return O(e)}function Do(t){let e;switch(t.readUInt8Enum(nt,(t=>{throw new Gr(`Could not parse ${t} as AuthType`)}))){case nt.Standard:return e=Bo(t),$o(e);case nt.Sponsored:return e=Bo(t),_o(e,Bo(t))}}var zo=Object.defineProperty,Ko=Object.defineProperties,Go=Object.getOwnPropertyDescriptors,Wo=Object.getOwnPropertySymbols,qo=Object.prototype.hasOwnProperty,Jo=Object.prototype.propertyIsEnumerable,Xo=(t,e,n)=>e in t?zo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;class Zo{constructor(t,e,n,r,i,o,s){var a,c;if(this.version=t,this.auth=e,this.payload="amount"in n?(a=((t,e)=>{for(var n in e||(e={}))qo.call(e,n)&&Xo(t,n,e[n]);if(Wo)for(var n of Wo(e))Jo.call(e,n)&&Xo(t,n,e[n]);return t})({},n),c={amount:y(n.amount,!1)},Ko(a,Go(c))):n,this.chainId=null!=s?s:_,this.postConditionMode=null!=i?i:tt.Deny,this.postConditions=null!=r?r:Ni([]),o)this.anchorMode=Z(o);else switch(n.payloadType){case G.Coinbase:case G.CoinbaseToAltRecipient:case G.PoisonMicroblock:this.anchorMode=q.OnChainOnly;break;case G.ContractCall:case G.SmartContract:case G.VersionedSmartContract:case G.TokenTransfer:this.anchorMode=q.Any}}signBegin(){const t=qi(this);return t.auth=No(t.auth),t.txid()}verifyBegin(){const t=qi(this);return t.auth=No(t.auth),t.txid()}verifyOrigin(){return Ho(this.auth,this.verifyBegin())}signNextOrigin(t,e){if(void 0===this.auth.spendingCondition)throw new Error('"auth.spendingCondition" is undefined');if(void 0===this.auth.authType)throw new Error('"auth.authType" is undefined');return this.signAndAppend(this.auth.spendingCondition,t,nt.Standard,e)}signNextSponsor(t,e){if(this.auth.authType===nt.Sponsored)return this.signAndAppend(this.auth.sponsorSpendingCondition,t,nt.Sponsored,e);throw new Error('"auth.sponsorSpendingCondition" is undefined')}appendPubkey(t){const e=this.auth.spendingCondition;if(!e||vo(e))throw new Error("Can't append public key to a singlesig condition");{const n=Jn(t);e.fields.push(pi(n?ot.Compressed:ot.Uncompressed,t))}}signAndAppend(t,e,n,r){const{nextSig:i,nextSigHash:o}=Oo(e,n,t.fee,t.nonce,r);if(vo(t))t.signature=i;else{const e=C(r.data).endsWith("01");t.fields.push(pi(e?ot.Compressed:ot.Uncompressed,i))}return o}txid(){const t=this.serialize();return Xi(t)}setSponsor(t){if(this.auth.authType!=nt.Sponsored)throw new Jr("Cannot sponsor sign a non-sponsored transaction");this.auth=Ro(this.auth,t)}setFee(t){this.auth=Fo(this.auth,t)}setNonce(t){this.auth=Lo(this.auth,t)}setSponsorNonce(t){if(this.auth.authType!=nt.Sponsored)throw new Jr("Cannot sponsor sign a non-sponsored transaction");this.auth=jo(this.auth,t)}serialize(){if(void 0===this.version)throw new Kr('"version" is undefined');if(void 0===this.chainId)throw new Kr('"chainId" is undefined');if(void 0===this.auth)throw new Kr('"auth" is undefined');if(void 0===this.anchorMode)throw new Kr('"anchorMode" is undefined');if(void 0===this.payload)throw new Kr('"payload" is undefined');const t=[];t.push(this.version);const e=new Uint8Array(4);return k(e,this.chainId,0),t.push(e),t.push(Vo(this.auth)),t.push(this.anchorMode),t.push(this.postConditionMode),t.push(Hi(this.postConditions)),t.push(hi(this.payload)),O(t)}}function Yo(t){let e;e="string"==typeof t?"0x"===t.slice(0,2).toLowerCase()?new Dr(A(t.slice(2))):new Dr(A(t)):t instanceof Uint8Array?new Dr(t):t;const n=e.readUInt8Enum(Y,(t=>{throw new Error(`Could not parse ${t} as TransactionVersion`)})),r=e.readUInt32BE(),i=Do(e),o=e.readUInt8Enum(q,(t=>{throw new Error(`Could not parse ${t} as AnchorMode`)})),s=e.readUInt8Enum(tt,(t=>{throw new Error(`Could not parse ${t} as PostConditionMode`)})),a=Fi(e,z.PostCondition),c=fi(e);return new Zo(n,i,c,a,s,o,r)}function Qo(t,e,n){return"string"==typeof t&&(t=dr(t)),{type:z.PostCondition,conditionType:et.STX,principal:t,conditionCode:e,amount:y(n,!1)}}function ts(t,e,n,r){return"string"==typeof t&&(t=dr(t)),"string"==typeof r&&(r=cr(r)),{type:z.PostCondition,conditionType:et.Fungible,principal:t,conditionCode:e,amount:y(n,!1),assetInfo:r}}function es(t,e,n,r){return"string"==typeof t&&(t=dr(t)),"string"==typeof n&&(n=cr(n)),{type:z.PostCondition,conditionType:et.NonFungible,principal:t,conditionCode:e,assetInfo:n,assetName:r}}function ns(t,e="hex"){switch(t.type){case yr.BoolTrue:return"true";case yr.BoolFalse:return"false";case yr.Int:return t.value.toString();case yr.UInt:return`u${t.value.toString()}`;case yr.Buffer:if("tryAscii"===e){const e=P(t.buffer);if(/[ -~]/.test(e))return JSON.stringify(e)}return`0x${C(t.buffer)}`;case yr.OptionalNone:return"none";case yr.OptionalSome:return`(some ${ns(t.value,e)})`;case yr.ResponseErr:return`(err ${ns(t.value,e)})`;case yr.ResponseOk:return`(ok ${ns(t.value,e)})`;case yr.PrincipalStandard:case yr.PrincipalContract:return Pr(t);case yr.List:return`(list ${t.list.map((t=>ns(t,e))).join(" ")})`;case yr.Tuple:return`(tuple ${Object.keys(t.data).map((n=>`(${n} ${ns(t.data[n],e)})`)).join(" ")})`;case yr.StringASCII:return`"${t.data}"`;case yr.StringUTF8:return`u"${t.data}"`}}function rs(t,e=!1){switch(t.type){case yr.BoolTrue:return!0;case yr.BoolFalse:return!1;case yr.Int:case yr.UInt:return e?t.value.toString():t.value;case yr.Buffer:return`0x${C(t.buffer)}`;case yr.OptionalNone:return null;case yr.OptionalSome:case yr.ResponseErr:case yr.ResponseOk:return is(t.value);case yr.PrincipalStandard:case yr.PrincipalContract:return Pr(t);case yr.List:return t.list.map((t=>is(t)));case yr.Tuple:const n={};return Object.keys(t.data).forEach((e=>{n[e]=is(t.data[e])})),n;case yr.StringASCII:case yr.StringUTF8:return t.data}}function is(t){switch(t.type){case yr.ResponseErr:return{type:os(t),value:rs(t,!0),success:!1};case yr.ResponseOk:return{type:os(t),value:rs(t,!0),success:!0};default:return{type:os(t),value:rs(t,!0)}}}function os(t){switch(t.type){case yr.BoolTrue:case yr.BoolFalse:return"bool";case yr.Int:return"int";case yr.UInt:return"uint";case yr.Buffer:return`(buff ${t.buffer.length})`;case yr.OptionalNone:return"(optional none)";case yr.OptionalSome:return`(optional ${os(t.value)})`;case yr.ResponseErr:return`(response UnknownType ${os(t.value)})`;case yr.ResponseOk:return`(response ${os(t.value)} UnknownType)`;case yr.PrincipalStandard:case yr.PrincipalContract:return"principal";case yr.List:return`(list ${t.list.length} ${t.list.length?os(t.list[0]):"UnknownType"})`;case yr.Tuple:return`(tuple ${Object.keys(t.data).map((e=>`(${e} ${os(t.data[e])})`)).join(" ")})`;case yr.StringASCII:return`(string-ascii ${T(t.data).length})`;case yr.StringUTF8:return`(string-utf8 ${E(t.data).length})`}}i(616);const ss={referrerPolicy:"origin"};async function as(t,e){const n={};return Object.assign(n,e,ss),await fetch(t,n)}function cs(...t){const{fetchLib:e,middlewares:n}=function(t){let e=as,n=[];return t.length>0&&"function"==typeof t[0]&&(e=t.shift()),t.length>0&&(n=t),{fetchLib:e,middlewares:n}}(t);return async(t,r)=>{let i={url:t,init:r??{}};for(const t of n)"function"==typeof t.pre&&(i=await Promise.resolve(t.pre({fetch:e,...i}))??i);let o=await e(i.url,i.init);for(const t of n)if("function"==typeof t.post){const n=await Promise.resolve(t.post({fetch:e,url:i.url,init:i.init,response:o?.clone()??o}));o=n??o}return o}}const us=["mainnet","testnet"];class hs{constructor(t){this.version=Tn.Mainnet,this.chainId=xn.Mainnet,this.bnsLookupUrl="https://stacks-node-api.mainnet.stacks.co",this.broadcastEndpoint="/v2/transactions",this.transferFeeEstimateEndpoint="/v2/fees/transfer",this.transactionFeeEstimateEndpoint="/v2/fees/transaction",this.accountEndpoint="/v2/accounts",this.contractAbiEndpoint="/v2/contracts/interface",this.readOnlyFunctionCallEndpoint="/v2/contracts/call-read",this.isMainnet=()=>this.version===Tn.Mainnet,this.getBroadcastApiUrl=()=>`${this.coreApiUrl}${this.broadcastEndpoint}`,this.getTransferFeeEstimateApiUrl=()=>`${this.coreApiUrl}${this.transferFeeEstimateEndpoint}`,this.getTransactionFeeEstimateApiUrl=()=>`${this.coreApiUrl}${this.transactionFeeEstimateEndpoint}`,this.getAccountApiUrl=t=>`${this.coreApiUrl}${this.accountEndpoint}/${t}?proof=0`,this.getAccountExtendedBalancesApiUrl=t=>`${this.coreApiUrl}/extended/v1/address/${t}/balances`,this.getAbiApiUrl=(t,e)=>`${this.coreApiUrl}${this.contractAbiEndpoint}/${t}/${e}`,this.getReadOnlyFunctionCallApiUrl=(t,e,n)=>`${this.coreApiUrl}${this.readOnlyFunctionCallEndpoint}/${t}/${e}/${encodeURIComponent(n)}`,this.getInfoUrl=()=>`${this.coreApiUrl}/v2/info`,this.getBlockTimeInfoUrl=()=>`${this.coreApiUrl}/extended/v1/info/network_block_times`,this.getPoxInfoUrl=()=>`${this.coreApiUrl}/v2/pox`,this.getRewardsUrl=(t,e)=>{let n=`${this.coreApiUrl}/extended/v1/burnchain/rewards/${t}`;return e&&(n=`${n}?limit=${e.limit}&offset=${e.offset}`),n},this.getRewardsTotalUrl=t=>`${this.coreApiUrl}/extended/v1/burnchain/rewards/${t}/total`,this.getRewardHoldersUrl=(t,e)=>{let n=`${this.coreApiUrl}/extended/v1/burnchain/reward_slot_holders/${t}`;return e&&(n=`${n}?limit=${e.limit}&offset=${e.offset}`),n},this.getStackerInfoUrl=(t,e)=>`${this.coreApiUrl}${this.readOnlyFunctionCallEndpoint}\n    ${t}/${e}/get-stacker-info`,this.getDataVarUrl=(t,e,n)=>`${this.coreApiUrl}/v2/data_var/${t}/${e}/${n}?proof=0`,this.coreApiUrl=t.url,this.fetchFn=t.fetchFn??cs()}getNameInfo(t){const e=`${this.bnsLookupUrl}/v1/names/${t}`;return this.fetchFn(e).then((t=>{if(404===t.status)throw new Error("Name not found");if(200!==t.status)throw new Error(`Bad response status: ${t.status}`);return t.json()})).then((t=>t.address?Object.assign({},t,{address:t.address}):t))}}hs.fromName=t=>{switch(t){case"mainnet":return new fs;case"testnet":return new ds;default:throw new Error(`Invalid network name provided. Must be one of the following: ${us.join(", ")}`)}},hs.fromNameOrNetwork=t=>"string"!=typeof t&&"version"in t?t:hs.fromName(t);class fs extends hs{constructor(t){super({url:t?.url??"https://stacks-node-api.mainnet.stacks.co",fetchFn:t?.fetchFn}),this.version=Tn.Mainnet,this.chainId=xn.Mainnet}}class ds extends hs{constructor(t){super({url:t?.url??"https://stacks-node-api.testnet.stacks.co",fetchFn:t?.fetchFn}),this.version=Tn.Testnet,this.chainId=xn.Testnet}}var ls=(t=>(t[t.ClarityAbiTypeUInt128=1]="ClarityAbiTypeUInt128",t[t.ClarityAbiTypeInt128=2]="ClarityAbiTypeInt128",t[t.ClarityAbiTypeBool=3]="ClarityAbiTypeBool",t[t.ClarityAbiTypePrincipal=4]="ClarityAbiTypePrincipal",t[t.ClarityAbiTypeNone=5]="ClarityAbiTypeNone",t[t.ClarityAbiTypeBuffer=6]="ClarityAbiTypeBuffer",t[t.ClarityAbiTypeResponse=7]="ClarityAbiTypeResponse",t[t.ClarityAbiTypeOptional=8]="ClarityAbiTypeOptional",t[t.ClarityAbiTypeTuple=9]="ClarityAbiTypeTuple",t[t.ClarityAbiTypeList=10]="ClarityAbiTypeList",t[t.ClarityAbiTypeStringAscii=11]="ClarityAbiTypeStringAscii",t[t.ClarityAbiTypeStringUtf8=12]="ClarityAbiTypeStringUtf8",t[t.ClarityAbiTypeTraitReference=13]="ClarityAbiTypeTraitReference",t))(ls||{});const ps=t=>"string"==typeof t,ys=t=>void 0!==t.buffer,gs=t=>void 0!==t["string-ascii"],ws=t=>void 0!==t["string-utf8"],bs=t=>void 0!==t.response,ms=t=>void 0!==t.optional,Ss=t=>void 0!==t.tuple,vs=t=>void 0!==t.list;function Cs(t){if(ps(t)){if("uint128"===t)return{id:1,type:t};if("int128"===t)return{id:2,type:t};if("bool"===t)return{id:3,type:t};if("principal"===t)return{id:4,type:t};if("trait_reference"===t)return{id:13,type:t};if("none"===t)return{id:5,type:t};throw new Error(`Unexpected Clarity ABI type primitive: ${JSON.stringify(t)}`)}if(ys(t))return{id:6,type:t};if(bs(t))return{id:7,type:t};if(ms(t))return{id:8,type:t};if(Ss(t))return{id:9,type:t};if(vs(t))return{id:10,type:t};if(gs(t))return{id:11,type:t};if(ws(t))return{id:12,type:t};throw new Error(`Unexpected Clarity ABI type: ${JSON.stringify(t)}`)}function As(t,e){let n;switch(n=void 0!==t.id?t:Cs(t),n.id){case 1:return vr(e);case 2:return Sr(e);case 3:if("false"===e||"0"===e)return xr();if("true"===e||"1"===e)return Er();throw new Error(`Unexpected Clarity bool value: ${JSON.stringify(e)}`);case 4:if(e.includes(".")){const[t,n]=e.split(".");return Or(t,n)}return Ir(e);case 13:const[t,r]=e.split(".");return Or(t,r);case 5:return Hr();case 6:return Cr(E(e));case 11:return Zr(e);case 12:return Yr(e);case 7:case 8:case 9:case 10:throw new qr(`Unsupported encoding for Clarity type: ${n.id}`);default:throw new Error(`Unexpected Clarity type ID: ${JSON.stringify(n)}`)}}function Es(t){if(ps(t))return"int128"===t?"int":"uint128"===t?"uint":t;if(ys(t))return`(buff ${t.buffer.length})`;if(gs(t))return`(string-ascii ${t["string-ascii"].length})`;if(ws(t))return`(string-utf8 ${t["string-utf8"].length})`;if(bs(t))return`(response ${Es(t.response.ok)} ${Es(t.response.error)})`;if(ms(t))return`(optional ${Es(t.optional)})`;if(Ss(t))return`(tuple ${t.tuple.map((t=>`(${t.name} ${Es(t.type)})`)).join(" ")})`;if(vs(t))return`(list ${t.list.length} ${Es(t.list.type)})`;throw new Error(`Type string unsupported for Clarity type: ${JSON.stringify(t)}`)}function xs(t){return`(define-${"read_only"===t.access?"read-only":t.access} (${t.name} ${t.args.map((t=>`(${t.name} ${Es(t.type)})`)).join(" ")}))`}function Ts(t,e){const n=Cs(e);switch(t.type){case yr.BoolTrue:case yr.BoolFalse:return 3===n.id;case yr.Int:return 2===n.id;case yr.UInt:return 1===n.id;case yr.Buffer:return 6===n.id&&n.type.buffer.length>=t.buffer.length;case yr.StringASCII:return 11===n.id&&n.type["string-ascii"].length>=t.data.length;case yr.StringUTF8:return 12===n.id&&n.type["string-utf8"].length>=t.data.length;case yr.OptionalNone:return 5===n.id||8===n.id;case yr.OptionalSome:return 8===n.id&&Ts(t.value,n.type.optional);case yr.ResponseErr:return 7===n.id&&Ts(t.value,n.type.response.error);case yr.ResponseOk:return 7===n.id&&Ts(t.value,n.type.response.ok);case yr.PrincipalContract:return 4===n.id||13===n.id;case yr.PrincipalStandard:return 4===n.id;case yr.List:return 10==n.id&&n.type.list.length>=t.list.length&&t.list.every((t=>Ts(t,n.type.list.type)));case yr.Tuple:if(9==n.id){const e=qi(t.data);for(let t=0;t<n.type.tuple.length;t++){const r=n.type.tuple[t],i=r.name,o=e[i];if(!o)return!1;if(!Ts(o,r.type))return!1;delete e[i]}return!0}return!1;default:return!1}}function Ps(t,e){const n=e.functions.filter((e=>e.name===t.functionName.content));if(1===n.length){const e=n[0].args;if(t.functionArgs.length!==e.length)throw new Error(`Clarity function expects ${e.length} argument(s) but received ${t.functionArgs.length}`);for(let n=0;n<t.functionArgs.length;n++){const r=t.functionArgs[n],i=e[n];if(!Ts(r,i.type)){const e=n+1;throw new Error(`Clarity function \`${t.functionName.content}\` expects argument ${e} to be of type ${Es(i.type)}, not ${os(r)}`)}}return!0}throw 0===n.length?new Error(`ABI doesn't contain a function with the name ${t.functionName.content}`):new Error(`Malformed ABI. Contains multiple functions with the name ${t.functionName.content}`)}function Bs(t,e){const n=Es(e);if(ps(e)){if("uint128"===e)return vr(t);if("int128"===e)return Sr(t);if("bool"===e){if("true"===t.toLowerCase())return Er();if("false"===t.toLowerCase())return xr();throw new Error(`Invalid bool value: ${t}`)}if("principal"===e){if(t.includes(".")){const[e,n]=t.split(".");return Or(e,n)}return Ir(t)}throw new Error(`Contract function contains unsupported Clarity ABI type: ${n}`)}if(ys(e)){if(E(t).byteLength>e.buffer.length)throw new Error(`Input exceeds specified buffer length limit of ${e.buffer.length}`);return Ar(t)}throw bs(e)||ms(e)||Ss(e)||vs(e),new Error(`Contract function contains unsupported Clarity ABI type: ${n}`)}class Is{constructor(t){this.transaction=t,this.sigHash=t.signBegin(),this.originDone=!1,this.checkOversign=!0,this.checkOverlap=!0;const e=t.auth.spendingCondition;if(e&&!vo(e)){if(e.fields.filter((t=>t.contents.type===z.MessageSignature)).length>=e.signaturesRequired)throw new Error("SpendingCondition has more signatures than are expected");e.fields.forEach((n=>{if(n.contents.type===z.MessageSignature){const r=n.contents,i=ko(this.sigHash,t.auth.authType,e.fee,e.nonce,ot.Compressed,r);this.sigHash=i.nextSigHash}}))}}static createSponsorSigner(t,e){if(t.auth.authType!=nt.Sponsored)throw new Jr("Cannot add sponsor to non-sponsored transaction");const n=qi(t);n.setSponsor(e);const r=n.verifyOrigin(),i=new this(n);return i.originDone=!0,i.sigHash=r,i.checkOversign=!0,i.checkOverlap=!0,i}signOrigin(t){if(this.checkOverlap&&this.originDone)throw new Jr("Cannot sign origin after sponsor key");if(void 0===this.transaction.auth)throw new Jr('"transaction.auth" is undefined');if(void 0===this.transaction.auth.spendingCondition)throw new Jr('"transaction.auth.spendingCondition" is undefined');if(!vo(this.transaction.auth.spendingCondition)){const t=this.transaction.auth.spendingCondition;if(this.checkOversign&&t.fields.filter((t=>t.contents.type===z.MessageSignature)).length>=t.signaturesRequired)throw new Error("Origin would have too many signatures")}const e=this.transaction.signNextOrigin(this.sigHash,t);this.sigHash=e}appendOrigin(t){if(this.checkOverlap&&this.originDone)throw Error("Cannot append public key to origin after sponsor key");if(void 0===this.transaction.auth)throw new Error('"transaction.auth" is undefined');if(void 0===this.transaction.auth.spendingCondition)throw new Error('"transaction.auth.spendingCondition" is undefined');this.transaction.appendPubkey(t)}signSponsor(t){if(void 0===this.transaction.auth)throw new Jr('"transaction.auth" is undefined');if(this.transaction.auth.authType!==nt.Sponsored)throw new Jr('"transaction.auth.authType" is not AuthType.Sponsored');const e=this.transaction.signNextSponsor(this.sigHash,t);this.sigHash=e,this.originDone=!0}getTxInComplete(){return qi(this.transaction)}resume(t){this.transaction=qi(t),this.sigHash=t.signBegin()}}var Us=Object.defineProperty,Os=Object.defineProperties,ks=Object.getOwnPropertyDescriptors,$s=Object.getOwnPropertySymbols,_s=Object.prototype.hasOwnProperty,Ns=Object.prototype.propertyIsEnumerable,Hs=(t,e,n)=>e in t?Us(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fs=(t,e)=>{for(var n in e||(e={}))_s.call(e,n)&&Hs(t,n,e[n]);if($s)for(var n of $s(e))Ns.call(e,n)&&Hs(t,n,e[n]);return t},Ms=(t,e)=>Os(t,ks(e));async function Ls(t,e){const n=hs.fromNameOrNetwork(null!=e?e:new fs),r=n.getAccountApiUrl(t),i=await n.fetchFn(r);if(!i.ok){let t="";try{t=await i.text()}catch(t){}throw new Error(`Error fetching nonce. Response ${i.status}: ${i.statusText}. Attempted to fetch ${r} and failed with the message: "${t}"`)}const o=await i.text(),s=JSON.parse(o);return BigInt(s.nonce)}async function js(t,e){if(t.payload.payloadType!==G.TokenTransfer)throw new Error(`Transaction fee estimation only possible with ${G[G.TokenTransfer]} transactions. Invoked with: ${G[t.payload.payloadType]}`);return Rs(t,e)}async function Rs(t,e){const n=hs.fromNameOrNetwork(null!=e?e:Gs(t)),r=n.getTransferFeeEstimateApiUrl(),i=await n.fetchFn(r,{method:"GET",headers:{Accept:"application/text"}});if(!i.ok){let t="";try{t=await i.text()}catch(t){}throw new Error(`Error estimating transaction fee. Response ${i.status}: ${i.statusText}. Attempted to fetch ${r} and failed with the message: "${t}"`)}const o=await i.text(),s=BigInt(t.serialize().byteLength);return BigInt(o)*s}async function Vs(t,e,n){var r,i;const o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Fs({transaction_payload:C(hi(t))},e?{estimated_len:e}:{}))},s=hs.fromNameOrNetwork(null!=n?n:new fs),a=s.getTransactionFeeEstimateApiUrl(),c=await s.fetchFn(a,o);if(!c.ok){const t=await c.json().catch((()=>({})));if("NoEstimateAvailable"===(null==t?void 0:t.reason))throw new Wr(null!=(i=null==(r=null==t?void 0:t.reason_data)?void 0:r.message)?i:"");throw new Error(`Error estimating transaction fee. Response ${c.status}: ${c.statusText}. Attempted to fetch ${a} and failed with the message: "${t}"`)}return(await c.json()).estimations}async function Ds(t,e,n){const r=t.serialize(),i=hs.fromNameOrNetwork(null!=e?e:Gs(t));return zs(r,i.getBroadcastApiUrl(),n,i.fetchFn)}async function zs(t,e,n,r=cs()){const i={method:"POST",headers:{"Content-Type":n?"application/json":"application/octet-stream"},body:n?JSON.stringify({tx:C(t),attachment:C(n)}):t},o=await r(e,i);if(!o.ok)try{return await o.json()}catch(t){throw Error(`Failed to broadcast transaction: ${t.message}`)}const s=await o.text(),a=s.replace(/["]+/g,"");if(!ao(a))throw new Error(s);return{txid:a}}async function Ks(t,e,n){const r=hs.fromNameOrNetwork(n),i=r.getAbiApiUrl(t,e),o=await r.fetchFn(i,{method:"GET"});if(!o.ok){const n=await o.text().catch((()=>""));throw new Error(`Error fetching contract ABI for contract "${e}" at address ${t}. Response ${o.status}: ${o.statusText}. Attempted to fetch ${i} and failed with the message: "${n}"`)}return JSON.parse(await o.text())}function Gs(t){switch(t.version){case Y.Mainnet:return new fs;case Y.Testnet:return new ds}}async function Ws(t){const e={fee:BigInt(0),nonce:BigInt(0),network:new fs,postConditionMode:tt.Deny,memo:"",sponsored:!1},n=Object.assign(e,t),r=si(n.recipient,n.amount,n.memo);let i=null,o=null;o="publicKey"in n?mo(rt.SerializeP2PKH,n.publicKey,n.nonce,n.fee):So(rt.SerializeP2SH,n.numSignatures,n.publicKeys,n.nonce,n.fee),i=n.sponsored?_o(o):$o(o);const s=hs.fromNameOrNetwork(n.network),a=[];n.postConditions&&n.postConditions.length>0&&n.postConditions.forEach((t=>{a.push(t)}));const c=Ni(a),u=new Zo(s.version,i,r,c,n.postConditionMode,n.anchorMode,s.chainId);if(void 0===t.fee||null===t.fee){const t=await ha(u,s);u.setFee(t)}if(void 0===t.nonce||null===t.nonce){const t=n.network.version===Y.Mainnet?it.MainnetSingleSig:it.TestnetSingleSig,e=(0,mn.H4)(t,u.auth.spendingCondition.signer),r=await Ls(e,n.network);u.setNonce(r)}return u}async function qs(t){if("senderKey"in t){const e=Xn(or(er(t.senderKey))),n=Ji(t,"senderKey"),r=await Ws(Fs({publicKey:e},n)),i=er(t.senderKey);return new Is(r).signOrigin(i),r}{const e=Ji(t,"signerKeys"),n=await Ws(e),r=new Is(n);let i=t.publicKeys;for(const e of t.signerKeys){const t=Yn(e);i=i.filter((e=>e!==C(t.data))),r.signOrigin(er(e))}for(const t of i)r.appendOrigin(qn(A(t)));return n}}async function Js(t,e){if(t.payload.payloadType!==G.SmartContract&&t.payload.payloadType!==G.VersionedSmartContract)throw new Error(`Contract deploy fee estimation only possible with ${G[G.SmartContract]} transactions. Invoked with: ${G[t.payload.payloadType]}`);const n=hs.fromNameOrNetwork(null!=e?e:Gs(t)),r=n.getTransferFeeEstimateApiUrl(),i=await n.fetchFn(r,{method:"GET",headers:{Accept:"application/text"}});if(!i.ok){const t=await i.text().catch((()=>""));throw new Error(`Error estimating contract deploy fee. Response ${i.status}: ${i.statusText}. Attempted to fetch ${r} and failed with the message: "${t}"`)}const o=await i.text(),s=y(t.serialize().byteLength,!1);return y(o,!1)*s}async function Xs(t){const e=er(t.senderKey),n=Xn(or(e)),r=Ms(Fs({},t),{publicKey:n}),i=await Zs(r);return t.senderKey&&new Is(i).signOrigin(e),i}async function Zs(t){const e={fee:BigInt(0),nonce:BigInt(0),network:new fs,postConditionMode:tt.Deny,sponsored:!1},n=Object.assign(e,t),r=ci(n.contractName,n.codeBody,n.clarityVersion),i=rt.SerializeP2PKH,o=Kn(n.publicKey);let s=null;const a=mo(i,Xn(o),n.nonce,n.fee);s=n.sponsored?_o(a):$o(a);const c=hs.fromNameOrNetwork(n.network),u=[];n.postConditions&&n.postConditions.length>0&&n.postConditions.forEach((t=>{u.push(t)}));const h=Ni(u),f=new Zo(c.version,s,r,h,n.postConditionMode,n.anchorMode,c.chainId);if(void 0===t.fee||null===t.fee){const t=await ha(f,c);f.setFee(t)}if(void 0===t.nonce||null===t.nonce){const t=ar(n.network.version===Y.Mainnet?it.MainnetSingleSig:it.TestnetSingleSig,o),e=await Ls(t,n.network);f.setNonce(e)}return f}async function Ys(t,e){if(t.payload.payloadType!==G.ContractCall)throw new Error(`Contract call fee estimation only possible with ${G[G.ContractCall]} transactions. Invoked with: ${G[t.payload.payloadType]}`);const n=hs.fromNameOrNetwork(null!=e?e:Gs(t)),r=n.getTransferFeeEstimateApiUrl(),i=await n.fetchFn(r,{method:"GET",headers:{Accept:"application/text"}});if(!i.ok){const t=await i.text().catch((()=>""));throw new Error(`Error estimating contract call fee. Response ${i.status}: ${i.statusText}. Attempted to fetch ${r} and failed with the message: "${t}"`)}const o=await i.text(),s=y(t.serialize().byteLength,!1);return y(o,!1)*s}async function Qs(t){const e={fee:BigInt(0),nonce:BigInt(0),network:new fs,postConditionMode:tt.Deny,sponsored:!1},n=Object.assign(e,t),r=ai(n.contractAddress,n.contractName,n.functionName,n.functionArgs);if(null==n?void 0:n.validateWithAbi){let t;if("boolean"==typeof n.validateWithAbi){if(!(null==n?void 0:n.network))throw new Error("Network option must be provided in order to validate with ABI");t=await Ks(n.contractAddress,n.contractName,n.network)}else t=n.validateWithAbi;Ps(r,t)}let i=null,o=null;i="publicKey"in n?mo(rt.SerializeP2PKH,n.publicKey,n.nonce,n.fee):So(rt.SerializeP2SH,n.numSignatures,n.publicKeys,n.nonce,n.fee),o=n.sponsored?_o(i):$o(i);const s=hs.fromNameOrNetwork(n.network),a=[];n.postConditions&&n.postConditions.length>0&&n.postConditions.forEach((t=>{a.push(t)}));const c=Ni(a),u=new Zo(s.version,o,r,c,n.postConditionMode,n.anchorMode,s.chainId);if(void 0===t.fee||null===t.fee){const t=await ha(u,s);u.setFee(t)}if(void 0===t.nonce||null===t.nonce){const t=s.version===Y.Mainnet?it.MainnetSingleSig:it.TestnetSingleSig,e=(0,mn.H4)(t,u.auth.spendingCondition.signer),n=await Ls(e,s);u.setNonce(n)}return u}async function ta(t){if("senderKey"in t){const e=Xn(or(er(t.senderKey))),n=Ji(t,"senderKey"),r=await Qs(Fs({publicKey:e},n)),i=er(t.senderKey);return new Is(r).signOrigin(i),r}{const e=Ji(t,"signerKeys"),n=await Qs(e),r=new Is(n);let i=t.publicKeys;for(const e of t.signerKeys){const t=Yn(e);i=i.filter((e=>e!==C(t.data))),r.signOrigin(er(e))}for(const t of i)r.appendOrigin(qn(A(t)));return n}}function ea(t,e,n){return Qo(pr(t),e,n)}function na(t,e,n,r){return Qo(lr(t,e),n,r)}function ra(t,e,n,r){return ts(pr(t),e,n,r)}function ia(t,e,n,r,i){return ts(lr(t,e),n,r,i)}function oa(t,e,n,r){return es(pr(t),e,n,r)}function sa(t,e,n,r,i){return es(lr(t,e),n,r,i)}async function aa(t){const e={network:new fs},n=Object.assign(e,t),{contractName:r,contractAddress:i,functionName:o,functionArgs:s,senderAddress:a}=n,c=hs.fromNameOrNetwork(n.network),u=c.getReadOnlyFunctionCallApiUrl(i,r,o),h=s.map((t=>ro(t))),f=JSON.stringify({sender:a,arguments:h}),d=await c.fetchFn(u,{method:"POST",body:f,headers:{"Content-Type":"application/json"}});if(!d.ok){const t=await d.text().catch((()=>""));throw new Error(`Error calling read-only function. Response ${d.status}: ${d.statusText}. Attempted to fetch ${u} and failed with the message: "${t}"`)}return d.json().then((t=>oo(t)))}async function ca(t){const e={fee:0,sponsorNonce:0,sponsorAddressHashmode:rt.SerializeP2PKH,network:t.transaction.version===Y.Mainnet?new fs:new ds},n=Object.assign(e,t),r=hs.fromNameOrNetwork(n.network),i=Yn(n.sponsorPrivateKey);if(void 0===t.fee||null===t.fee){let t=0;switch(n.transaction.payload.payloadType){case G.TokenTransfer:case G.SmartContract:case G.VersionedSmartContract:case G.ContractCall:const e=ua(n.transaction);try{t=(await Vs(n.transaction.payload,e,r))[1].fee}catch(t){throw t}break;default:throw new Error(`Sponsored transactions not supported for transaction type ${G[n.transaction.payload.payloadType]}`)}n.transaction.setFee(t),n.fee=t}if(void 0===t.sponsorNonce||null===t.sponsorNonce){const t=ar(r.version===Y.Mainnet?it.MainnetSingleSig:it.TestnetSingleSig,i),e=await Ls(t,r);n.sponsorNonce=e}const o=mo(n.sponsorAddressHashmode,Xn(i),n.sponsorNonce,n.fee);n.transaction.setSponsor(o);const s=er(n.sponsorPrivateKey),a=Is.createSponsorSigner(n.transaction,o);return a.signSponsor(s),a.transaction}function ua(t){const e=t.auth.spendingCondition.hashMode;if([rt.SerializeP2SH,rt.SerializeP2WSH].includes(e)){const e=t.auth.spendingCondition,n=e.fields.filter((t=>t.contents.type===z.MessageSignature)).length,r=(e.signaturesRequired-n)*(L+1);return t.serialize().byteLength+r}return t.serialize().byteLength}async function ha(t,e){try{const n=ua(t);return(await Vs(t.payload,n,e))[1].fee}catch(n){if(n instanceof Wr)return await Rs(t,e);throw n}}const fa=new Uint8Array([83,73,80,48,49,56]);function da(t){return Rt(Vi(t))}const la=32;function pa({message:t,domain:e}){const n=da(t);if((r=e).type!==yr.Tuple||!["name","version","chain-id"].every((t=>t in r.data))||!["name","version"].every((t=>r.data[t].type===yr.StringASCII))||r.data["chain-id"].type!==yr.UInt)throw new Error("domain parameter must be a valid domain of type TupleCV with keys 'name', 'version', 'chain-id' with respective types StringASCII, StringASCII, UInt");var r;const i=da(e);return U(fa,i,n)}function ya(t){const e="string"==typeof t?E(t):t;return{domainHash:e.slice(fa.length,fa.length+la),messageHash:e.slice(fa.length+la)}}function ga({message:t,domain:e,privateKey:n}){const r=C(Rt(pa({message:t,domain:e}))),{data:i}=ir({messageHash:r,privateKey:n});return{data:i,type:z.StructuredDataSignature}}})(),o})()));
//# sourceMappingURL=index.js.map